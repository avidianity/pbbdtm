(this.webpackJsonpjeff=this.webpackJsonpjeff||[]).push([[0],{229:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(41),i=a.n(r),l=(a(96),a(2)),o=a.n(l),d=a(4),u=a(8),j=a(11),b=(a(98),a(10)),m=a(53),h=a(7),p=a(6),f=a.n(p),x=a(42),O=a.n(x),v=a(9),g=a.n(v),N=a(18),w=a.n(N);function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?t:a}function k(e){var t=e.split("");return t[0]=t[0].toUpperCase(),t.join("")}function C(e){return e.split(" ").map((function(e){return"Id"===e?"ID":k(e)})).join(" ")}function D(e){if(e.response){var t=e.response;t.data.message&&422!==t.status?f.a.error(t.data.message):422===t.status?Object.values(t.data.errors).forEach((function(e){return e.forEach((function(e){return f.a.error(e)}))})):e.message?f.a.error(e.message):f.a.error("Something went wrong, please try again later.","Oops!")}else e.message&&f.a.error(e.message)}function S(e){return 0===e.length?[]:Object.keys(e[0]).map((function(e){switch(e){case"id":return"ID";case"createdAt":return"Date Requested";case"updatedAt":return"Date Modified";case"created_at":return"Date Requested";case"updated_at":return"Date Modified";default:return R(e)}}))}function R(e){return C(O.a.snakeCase(e).split("_").join(" "))}function _(e,t){return Object(b.a)(e).map((function(e){return function(e,t){var a,c=Object(h.a)({},e),n=Object(m.a)(t);try{for(n.s();!(a=n.n()).done;){var s=a.value;s in c&&delete c[s]}}catch(r){n.e(r)}finally{n.f()}return c}(e,t)}))}function q(e,t){return t.includes(e)}g.a.extend(w.a);new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});var A="/",E="/login",M="/register",P="/dashboard",F="/document-types",T="/users",U={ROOT:"/requests",ARCHIVED:"/archived",INACTIVE:"/inactive"},I="/profile",Y="/downloadables",J="/content-management",B="/contacts",L="/track-request",V=a(86),H=a(87),z=function(){function e(t){Object(V.a)(this,e),this.storage=void 0,this.key="pbbdtm-state-key",this.listeners={},this.storage=window.localStorage,t&&(this.key=t);var a=this.getAll();this.setAll(a)}return Object(H.a)(e,[{key:"clear",value:function(){return this.setAll({})}},{key:"getAll",value:function(){try{var e=this.storage.getItem(this.key);if(!e)return{};var t=JSON.parse(e);return"object"!==typeof t?{}:t}catch(a){return{}}}},{key:"setAll",value:function(e){return this.storage.setItem(this.key,JSON.stringify(e)),this}},{key:"has",value:function(e){return e in this.getAll()}},{key:"get",value:function(e){return this.getAll()[e]}},{key:"set",value:function(e,t){var a=this.getAll();return a[e]=t,this.dispatch(e,t),this.setAll(a)}},{key:"remove",value:function(e){if(this.has(e)){var t=this.getAll();delete t[e],this.setAll(t)}return this}},{key:"dispatch",value:function(e,t){var a=this;return e in this.listeners&&this.listeners[e].forEach((function(e){return e(t,a)})),this}},{key:"listen",value:function(e,t){return e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)-1}},{key:"unlisten",value:function(e,t){e in this.listeners&&this.listeners[e].splice(t,1)}}]),e}(),Q=new z,G=a(3),W=a(54),X=a.n(W);function K(e){var t=e.url,a=e.current,n=e.total,s=e.limit,r=e.onChange,i=Math.ceil(n/s),l=a-1,o=a+1,d="".concat(t,"?page=").concat(l),u="".concat(t,"?page=").concat(o),j=l>=1,b=o<=i;return Object(c.jsx)("nav",{"aria-label":"...",children:Object(c.jsxs)("ul",{className:"pagination justify-content-end mb-0",children:[Object(c.jsx)("li",{className:"page-item ".concat(j?"":"disabled"),children:Object(c.jsxs)("a",{className:"page-link",href:d,tabIndex:-1,onClick:function(e){e.preventDefault(),j&&r(l)},children:[Object(c.jsx)("i",{className:"fas fa-angle-left"}),Object(c.jsx)("span",{className:"sr-only",children:"Previous"})]})}),function(){for(var e=[],n=function(n){var s;e.push(Object(c.jsx)("li",{className:"page-item ".concat(n===a?"active":""),children:Object(c.jsxs)("a",{className:"page-link",href:(s=n,"".concat(t,"?page=").concat(s)),tabIndex:-1,onClick:function(e){e.preventDefault(),r(n)},children:[n," ",n===a?Object(c.jsx)("span",{className:"sr-only",children:"(current)"}):null]})},n))},s=1;s<=i;s++)n(s);return e}(),Object(c.jsx)("li",{className:"page-item ".concat(b?"":"disabled"),children:Object(c.jsxs)("a",{className:"page-link",href:u,tabIndex:-1,onClick:function(e){e.preventDefault(),b&&r(o)},children:[Object(c.jsx)("i",{className:"fas fa-angle-right"}),Object(c.jsx)("span",{className:"sr-only",children:"Next"})]})})]})})}function Z(e){var t=e.title,a=(e.theme,e.columns),s=e.data,r=e.onViewClick,i=e.onEditClick,l=e.onDeleteConfirm,o=e.onRefreshClick,d=e.processing,u=e.onAddClick,b=e.withAction,m=e.pagination,h=e.border,p=e.dontShowView,f=e.dontShowEdit,x=e.dontShowDelete,v=e.disableAddButton,N=a||S(s),w=Object(j.g)(),k=new z(O.a.kebabCase(t.toLowerCase()+"-table")),C=s.length,D=k.has("page")?k.get("page"):1,_=Object(n.useState)(k.has("perPage")?k.get("perPage"):10),q=Object(G.a)(_,2),A=q[0],E=q[1];D>Math.ceil(C/A)&&k.has("page")&&k.set("page",1);var M=Object(n.useState)(D<=Math.ceil(C/A)?D:1),P=Object(G.a)(M,2),F=P[0],T=P[1],U=k.listen("page",(function(e){return T(e)})),I=Object(n.useState)(A),Y=Object(G.a)(I,2),J=Y[0],B=Y[1],L=Object(n.useState)(!1),V=Object(G.a)(L,2),H=V[0],Q=V[1],W=k.listen("perPage",(function(e){F>Math.ceil(C/e)&&k.set("page",1),E(e)}));Object(n.useEffect)((function(){return function(){k.unlisten("page",U),k.unlisten("perPage",W)}}),[]);for(var Z=(F-1)*A,ee=[],te=Z;te<Z+A;te++)"undefined"!==typeof s[te]&&ee.push(s[te]);var ae=m?ee:s;return Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsxs)("div",{className:"card ".concat(h?"border":""," w-100"),children:[Object(c.jsxs)("div",{className:"card-header border-0",children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h3",{className:"mb-0 align-self-center",children:t}),Object(c.jsxs)("div",{className:"ml-auto align-self-center d-flex",children:[!b||void 0!==v&&!1!==v?null:Object(c.jsx)("i",{className:"fas fa-plus clickable d-block align-self-center m-1 text-warning",onClick:function(){return u()}}),b?Object(c.jsx)("i",{className:"fas fa-redo-alt clickable d-block align-self-center m-1 text-info ".concat(d?"fa-spin":""),onClick:function(){return o()}}):null]})]}),m?Object(c.jsxs)("div",{className:"mt-4",children:[Object(c.jsx)("div",{className:"py-2",children:Object(c.jsxs)("button",{className:"btn btn-".concat(H?"danger":"primary"," btn-sm"),onClick:function(e){e.preventDefault(),Q(!H)},children:[H?"Hide":"Show"," Options"]})}),H?Object(c.jsxs)("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),k.set("perPage",J>=1?J:10)},children:[Object(c.jsxs)("div",{className:"form-group p-1",children:[Object(c.jsx)("label",{htmlFor:"perPage",className:"mr-2",children:"Rows per Page:"}),Object(c.jsx)("input",{type:"number",name:"perPage",id:"perPage",placeholder:"Per Page",value:J,onChange:function(e){return B(Number(e.target.value))},className:"form-control form-control-sm"})]}),Object(c.jsx)("div",{className:"form-group p-1",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-warning btn-sm",children:"Change"})})]}):null]}):null]}),d?Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("div",{className:"text-center",children:Object(c.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})}):Object(c.jsx)("div",{className:"card-body",children:ae.length>0?Object(c.jsxs)("div",{className:"table-responsive",style:{overflowY:"hidden"},children:[Object(c.jsxs)("table",{className:"table table-sm",children:[Object(c.jsx)("thead",{className:"text-primary",children:Object(c.jsxs)("tr",{children:[N.map((function(e,t){return Object(c.jsx)("th",{className:"sort text-center","data-sort":e.toLowerCase(),scope:"col",children:e},t)})),b?Object(c.jsx)("th",{scope:"col",className:"text-center",children:"Actions"}):null]})}),Object(c.jsx)("tbody",{children:ae.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object.entries(e).map((function(e,t){var a,n=Object(G.a)(e,2),s=n[0],r=n[1];return Object(c.jsx)("td",{className:"text-center",children:"updatedAt"===s||"createdAt"===s?(a=r,g()(a).fromNow()):r},t)})),b?Object(c.jsx)("td",{className:"text-center",children:Object(c.jsxs)("div",{className:"dropdown",children:[Object(c.jsx)("button",{className:"btn btn-sm btn-icon-only text-light","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(c.jsx)("i",{className:"fas fa-ellipsis-v"})}),Object(c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right dropdown-menu-arrow",children:[y(void 0===p||!1===p,Object(c.jsxs)("button",{className:"dropdown-item",onClick:function(){return r(e)},children:[Object(c.jsx)("i",{className:"ni ni-active-40 text-info"}),"View"]})),y(void 0===f||!1===f,Object(c.jsxs)("button",{className:"dropdown-item",onClick:function(){return i(e)},children:[Object(c.jsx)("i",{className:"ni ni-ruler-pencil text-warning"}),"Edit"]})),y(void 0===x||!1===x,Object(c.jsxs)("button",{type:"button","data-toggle":"modal","data-target":"#deleteModal".concat(t),className:"dropdown-item",children:[Object(c.jsx)("i",{className:"ni ni-fat-delete text-danger"}),"Delete"]}))]})]})}):null]},t)}))}),ae.length>=10?Object(c.jsx)("thead",{className:"text-primary",children:Object(c.jsxs)("tr",{children:[N.map((function(e,t){return Object(c.jsx)("th",{className:"sort text-center","data-sort":e.toLowerCase(),scope:"col",children:e},t)})),b?Object(c.jsx)("th",{scope:"col",className:"text-center",children:"Actions"}):null]})}):null]}),b?ae.map((function(e,a){return Object(c.jsx)("div",{className:"modal fade",id:"deleteModal".concat(a),tabIndex:-1,role:"dialog","aria-labelledby":"deleteModalLabel".concat(a),"aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsxs)("h5",{className:"modal-title",id:"deleteModalLabel".concat(a),children:["Delete ",X.a.singular(t)]}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete this ",X.a.singular(R(t)),"?"]}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(t){t.preventDefault();var c=$("#deleteModal".concat(a));c.on("hidden.bs.modal",(function(){return l(e)})),c.modal("hide")},children:"Confirm"}),Object(c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})},a)})):null]}):Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("h3",{className:"text-center",children:"No Data"})})}),m?Object(c.jsx)("div",{className:"card-footer py-4",children:ae.length>0&&Math.ceil(C/A)>1?Object(c.jsx)(K,{url:w.path,current:F,total:C,limit:A,onChange:function(e){k.set("page",e)}}):null}):null]})})})}var ee=a(5),te=a.n(ee);function ae(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(""),l=Object(G.a)(i,2),u=l[0],b=l[1],m=Object(j.f)(),h=Q.get("user"),p=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,te.a.get("/requests");case 4:if(t=e.sent,a=t.data,!(c=a.find((function(e){return e.request_id.includes(u)||e.request_id===u})))||Q.has("logged")&&Q.get("logged")&&void 0!==Q.get("user")){e.next=9;break}return e.abrupt("return",m.push("".concat(L,"/").concat(c.id)));case 9:if(c&&("Applicant"!==h.role||c.user_id===h.id)){e.next=11;break}return e.abrupt("return",f.a.info("Request ID is invalid.","Notice"));case 11:m.push("/dashboard/requests/".concat(c.id)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to verify request ID.","Oops!");case 18:return e.prev=18,r(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"card shadow ".concat(e.className),children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),p()},children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"text",placeholder:"Request ID",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:u,onChange:function(e){b(e.target.value.trim())}})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-warning ".concat(y(s,"disabled")),disabled:s,children:s?"Processing":"Track Request"})})]})})})}var ce=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(j.g)(),m=Object(j.f)(),p=function(e){return"".concat(b.path).concat(e)},x=b.path.includes(U.INACTIVE)||b.path.includes(U.ARCHIVED),O=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.get("/requests");case 4:if(t=e.sent,a=t.data,!b.path.includes(U.INACTIVE)){e.next=8;break}return e.abrupt("return",s(_(a,["file","file_id","user_id","document_type_id","tasks","status","acknowledged","expired","files","for","evaluation","acknowledged_dates"]).filter((function(e){return e.expired}))));case 8:if(!b.path.includes(U.ARCHIVED)){e.next=10;break}return e.abrupt("return",s(_(a,["file","file_id","user_id","document_type_id","tasks","status","acknowledged","expired","files","for","evaluation","acknowledged_dates"]).filter((function(e){return e.approved}))));case 10:s(_(a,["file","file_id","user_id","document_type_id","tasks","files","for","acknowledged_dates"])),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch requests.");case 17:return e.prev=17,u(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.delete("/requests?id=".concat(t));case 4:return f.a.success("Request deleted successfully."),e.next=7,O();case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),D(e.t0),u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),N=Q.get("user"),w=function(e){return function(e){switch(e.status){case"Received":return"Admin"===N.role;case"Payment":return"Cashier"===N.role;case"Evaluating":return"Evaluation"===N.role;case"Evaluated":return"Registrar"===N.role||"Director"===N.role;case"Signed":return"Releasing"===N.role;default:return!1}}(e)?e.acknowledged?Object(c.jsx)("button",{className:"btn btn-warning btn-sm disabled",disabled:!0,children:"Done"}):Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(){var t=Object(d.a)(o.a.mark((function t(a){var c,n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.currentTarget.setAttribute("disabled","true"),a.currentTarget.classList.add("disabled"),a.currentTarget.textContent="Acknowledging...",t.prev=4,t.next=7,te.a.get("/requests/show?id=".concat(e.id));case 7:return c=t.sent,n=c.data,(s=Array.from(JSON.parse(n.acknowledged_dates))).push({date:(new Date).toJSON(),status:n.status}),"Releasing"===N.role&&s.push({date:(new Date).toJSON(),status:"Releasing"}),t.next=14,te.a.put("/requests?id=".concat(n.id),{acknowledged:!0,acknowledged_dates:JSON.stringify(s)});case 14:return f.a.info("Request acknowledged.","Notice"),t.next=17,O();case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),console.log(t.t0.toJSON(),e),f.a.error("Unable to acknowledge request.");case 23:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(e){return t.apply(this,arguments)}}(),children:"Acknowledge"}):e.acknowledged?Object(c.jsx)("span",{className:"badge badge-green",children:"Yes"}):Object(c.jsx)("span",{className:"badge badge-red",children:"No"})};return Object(n.useEffect)((function(){O()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ae,{}),Object(c.jsx)(Z,{title:function(){if(!x)return"Requests";var e=b.path.split("/");return"".concat(k(e[e.length-1])," Requests")}(),columns:S(a),data:function(e){switch(N.role){case"Admin":return e;case"Cashier":return e.filter((function(e){return"Payment"===e.status}));case"Evaluation":return e.filter((function(e){return"Evaluating"===e.status}));case"Director":return e.filter((function(e){return!e.for||"Registrar"!==e.for}));case"Registrar":return e.filter((function(e){return!e.for||"Director"!==e.for}));case"Releasing":return e.filter((function(e){return"Signed"===e.status||"Releasing"===e.status}));case"Applicant":return e.filter((function(e){return e.user_id===N.id}))}}(a).map((function(e){return Object(h.a)(Object(h.a)({},e),{},{created_at:g()(e.created_at).format("MMMM DD, YYYY hh:mm A"),updated_at:g()(e.updated_at).format("MMMM DD, YYYY hh:mm A"),user:e.user.name,documentType:e.documentType.name,approved:e.approved?Object(c.jsx)("span",{className:"badge badge-green",children:"Yes"}):Object(c.jsx)("span",{className:"badge badge-red",children:"No"}),acknowledged:b.path.includes(U.ARCHIVED)||b.path.includes(U.INACTIVE)?"":w(e),evaluation:e.evaluation?e.evaluation:""})})).map((function(e){return b.path.includes(U.ARCHIVED)||b.path.includes(U.INACTIVE)?e:Object(h.a)(Object(h.a)({},e),{},{expired:e.expired?Object(c.jsx)("span",{className:"badge badge-red",children:"Yes"}):Object(c.jsx)("span",{className:"badge badge-green",children:"No"}),status:e.acknowledged?Object(c.jsx)("span",{className:"badge badge-green",children:e.status}):Object(c.jsx)("span",{className:"badge badge-danger",children:"Pending"})})})),processing:l,onAddClick:function(){return m.push(p("add"))},onViewClick:function(e){var t=e.id;m.push(p("".concat(t)))},onEditClick:function(e){var t=e.id;m.push(p("".concat(t,"/edit")))},onDeleteConfirm:function(e){var t=e.id;v(t)},onRefreshClick:O,withAction:!x,pagination:!0,dontShowView:"Applicant"===N.role||x,dontShowDelete:"Applicant"===N.role||x,disableAddButton:"Applicant"!==N.role||x})]})},ne=function(e){return Object(c.jsx)(ce,{})},se=a(16),re=["Received","Payment","Evaluating","Evaluated","Signed","Releasing","Released"];function ie(){var e,t,a,s,r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Q.get("user"),m=Object(n.useState)({document_type_id:-1,approved:!1,status:"Received",user_id:b.id,file_id:null,user:{name:"Applicant"===b.role?b.name:"N\\A"},documentType:{name:"N\\A"},acknowledged_dates:JSON.stringify([])}),p=Object(G.a)(m,2),x=p[0],O=p[1],v=Object(n.useState)(null),g=Object(G.a)(v,2),N=g[0],w=g[1],k=Object(n.createRef)(),C=Object(j.f)(),S=Object(j.g)(),R=S.params,_=S.path,q=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.id,e.prev=1,e.next=4,te.a.get("/requests/show?id=".concat(t));case 4:a=e.sent,O(Object(h.a)(Object(h.a)({},a.data),{},{file:null})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch request."),C.goBack();case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){_.includes("edit")&&q()}),[]);var A=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:for(u(!0),e.prev=3,(t=new FormData).append("_method","PUT"),N&&(x.file=N),a=0,c=["documentType","logs","files","tasks","user","evaluation","expired"];a<c.length;a++)delete x[c[a]];for(n in x)s=x[n],t.append(n,s);return e.next=11,te.a.post("/requests",t);case 11:f.a.success("Request updated successfully."),w(null),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),D(e.t0);case 18:return e.prev=18,u(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(){return e.apply(this,arguments)}}(),E=function(){switch(b.role){case"Admin":case"Registrar":case"Director":return["Received","Payment","Evaluating","Evaluated","Signed","Releasing","Released"];case"Cashier":return["Payment","Evaluating"];case"Evaluation":return["Signed","Released"];case"Releasing":return["Releasing","Released"];default:return[]}}();return Object(c.jsxs)("form",{className:"container",onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,A();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h3",{className:"align-self-center mb-0",children:"Update Request"}),Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:function(e){e.preventDefault(),C.goBack()},children:"Back"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"document_type_id",children:"Document Type"}),Object(c.jsx)("select",{name:"document_type_id",id:"document_type_id",className:"form-control form-control-sm",disabled:"Applicant"!==b.role,children:Object(c.jsx)("option",{value:null===(e=x.documentType)||void 0===e?void 0:e.name,children:null===(t=x.documentType)||void 0===t?void 0:t.name})})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"user_id",children:"User"}),Object(c.jsx)("select",{name:"user_id",id:"user_id",placeholder:"User",className:"form-control form-control-sm",disabled:"Applicant"!==b.role,children:Object(c.jsx)("option",{value:null===(a=x.user)||void 0===a?void 0:a.name,children:null===(s=x.user)||void 0===s?void 0:s.name})})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"status",children:"Status"}),Object(c.jsxs)("select",{name:"status",id:"status",placeholder:"Status",className:"form-control form-control-sm ".concat(y(l,"disabled")),disabled:l,onChange:function(e){var t=e.target,a=t.id,c=t.value;O(Object(h.a)(Object(h.a)({},x),{},Object(se.a)({},a,c)))},value:x.status,children:[Object(c.jsx)("option",{value:"",children:" -- Select -- "}),re.filter((function(e){return E.includes(e)})).map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"approved",children:"Approved"}),Object(c.jsxs)("select",{name:"approved",id:"approved",placeholder:"Approved",className:"form-control form-control-sm ".concat(y(l,"disabled")),disabled:l||"Admin"!==b.role&&"Releasing"!==b.role,value:x.approved?"Yes":"No",onChange:function(e){"Admin"!==b.role&&"Releasing"!==b.role||("Yes"===e.target.value?O(Object(h.a)(Object(h.a)({},x),{},{approved:!0})):O(Object(h.a)(Object(h.a)({},x),{},{approved:!1})))},children:[Object(c.jsx)("option",{value:"Yes",children:"Yes"}),Object(c.jsx)("option",{value:"No",children:"No"})]})]}),x.approved?Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("button",{className:"btn btn-warning btn-sm ".concat(y(l||null!==N,"disabled")),disabled:l||"Admin"!==b.role&&"Releasing"!==b.role||null!==N,onClick:function(e){var t;e.preventDefault(),null===(t=k.current)||void 0===t||t.click()},children:null!==N?"File Uploaded":"Upload File (if applicable)"}),Object(c.jsx)("input",{type:"file",id:"file",name:"file",placeholder:"File",className:"form-control form-control-sm d-none",disabled:l||"Admin"!==b.role&&"Releasing"!==b.role||null!==N,onChange:function(e){("Admin"===b.role||"Releasing"===b.role)&&e.target.files&&e.target.files.length>0&&w(e.target.files[0])},ref:k})]}):null,Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(y(l,"disabled")),disabled:l,children:l?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}var le=function(e){return Object(c.jsx)(ce,{})};function oe(){return Object(c.jsx)(ce,{})}a(123);var de=a(89),ue=a.n(de),je=function(e){var t=e.onChange,a=e.value;return Object(c.jsx)(ue.a,{onChange:t,value:a})};function be(){var e,t,a=Object(n.useState)(null),s=Object(G.a)(a,2),r=s[0],i=s[1],l=Object(j.f)(),b=Object(n.useState)(!1),m=Object(G.a)(b,2),p=m[0],x=m[1],O=Object(n.useState)("Registrar"),v=Object(G.a)(O,2),N=v[0],w=v[1],k=Object(n.useState)(""),C=Object(G.a)(k,2),S=C[0],R=C[1],_=Object(n.useState)("<p>Hello World</p>"),q=Object(G.a)(_,2),A=q[0],E=q[1],M=Q.get("user"),P=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/requests/show?id=".concat(t));case 3:c=e.sent,n=c.data,i(n),R("Your Request (ID: ".concat(n.request_id,") has been updated to ").concat(B(M.role),". ").concat(window.location.origin,"/dashboard/requests/").concat(n.id)),E("\n                <div>\n                    <p>Hi ".concat(null===(a=n.user)||void 0===a?void 0:a.name,"!</p>\n                    <p>Your request (ID: ").concat(n.request_id,") is updated to: <b>").concat(B(M.role),"</b></p>\n                    <p>Last Updater: ").concat(M.name,"</p>\n                    <p>Date Updated: ").concat(g()().format("MMMM DD, YYYY"),"</p>\n                </div>\n            ")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),D(e.t0),l.goBack();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.put("/requests/tasks",Object(h.a)(Object(h.a)({},t),{},{done:a,name:M.name}));case 3:f.a.info("Task updated.","Notice"),P("".concat(null===r||void 0===r?void 0:r.id)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.toJSON()),f.a.error("Unable to update task.","Oops!");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),T=!1,U=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:return T=!0,e.prev=3,e.next=6,te.a.delete("/requests?id=".concat(null===r||void 0===r?void 0:r.id));case 6:f.a.success("Request deleted successfully."),l.goBack(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),D(e.t0);case 13:return e.prev=13,T=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),I=Object(j.g)().params;Object(n.useEffect)((function(){P(I.id)}),[]);var Y=function(e){switch(e){case"Admin":return"Forward for payment to Cashier";case"Cashier":return"Mark as paid and forward to Evaluation";case"Evaluation":return"Forward to Signing";case"Director":case"Registrar":return"Mark as ready for releasing and forward to Releasing";case"Releasing":return"Notify client for document release";default:return""}}(M.role),J=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c,n,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),a={},e.prev=2,o=M.role,t&&(a.for=t),c=B(o),!["Registrar","Director"].includes(M.role)){e.next=12;break}return e.next=7,te.a.get("/requests/show?id=".concat(null===r||void 0===r?void 0:r.id));case 7:n=e.sent,s=n.data,(i=Array.from(JSON.parse(s.acknowledged_dates))).push({date:(new Date).toJSON(),status:"Signed"}),a.acknowledged_dates=JSON.stringify(i);case 12:return e.next=14,te.a.put("/requests?id=".concat(null===r||void 0===r?void 0:r.id),Object(h.a)(Object(h.a)({},a),{},{status:c,acknowledged:["Releasing","Released"].includes(c),sms_message:S,email_message:A}));case 14:f.a.info("Request has been updated and forwarded.","Notice"),l.goBack(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0.toJSON()),f.a.error("Something went wrong, please try again later.","Unable to forward");case 22:return e.prev=22,x(!1),e.finish(22);case 25:case"end":return e.stop()}var o}),e,null,[[2,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){switch(e){case"Admin":return"Payment";case"Cashier":return"Evaluating";case"Evaluation":return"Evaluated";case"Director":case"Registrar":return"Signed";case"Releasing":return"Releasing";default:throw new Error("Invalid role. ".concat(e))}},L=window.location.origin,V=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.a.info("Printing. Please wait."),(t=$(String($("#request-card")[0].innerHTML))).find("button").remove(),t.find(".bi-plus-circle").remove(),t.find('i[title="Mark as Not Done"]').remove(),t.find('i[title="Mark as Done"]').remove(),t.find('i[title="Edit"]').remove(),t.find('i[title="Delete"]').remove(),a=$("#iframe")[0],c=["https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css","https://fonts.googleapis.com/css?family=Montserrat:400,700,200",L+"/assets/css/bootstrap.min.css",L+"/assets/css/paper-dashboard.css",L+"/assets/demo/demo.css"],null===(n=a.contentWindow)||void 0===n||n.document.open(),!n||!n.document){e.next=25;break}return n.document.write("<head>"),e.next=16,Promise.all(c.map(function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get(t,{timeout:5e3});case 3:return a=e.sent,c=a.data,e.abrupt("return","<style>".concat(c,"</style>"));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",'<link href="'.concat(t,'" rel="stylesheet" />'));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 16:e.sent.forEach((function(e){n.document.write(e)})),n.document.write("</head>"),n.document.write("<body>"),n.document.write(t.html()),n.document.write("</body>"),n.document.close(),n.focus(),setTimeout((function(){n.print()}),500);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){return Array.from(JSON.parse((null===r||void 0===r?void 0:r.acknowledged_dates)||"[]")).find((function(t){return t.status===e}))};return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("h3",{className:"mb-0",children:"View Request"})}),Object(c.jsxs)("div",{className:"col-12 d-flex",children:[Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:function(e){e.preventDefault(),l.goBack()},children:"Back"}),"Applicant"!==M.role?Object(c.jsx)(u.b,{to:"".concat(window.location.pathname,"/edit"),className:"btn btn-warning btn-sm align-self-center ml-auto",children:"Edit"}):null,"Applicant"!==M.role?Object(c.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:function(e){e.preventDefault(),$("#deleteRequestModal").modal("show")},children:"Delete"}):null]}),Object(c.jsx)("div",{className:"col-12",id:"request-card",children:r?Object(c.jsxs)("div",{className:"card shadow rounded",children:[Object(c.jsxs)("div",{className:"card-header",children:[!["Applicant","Evaluation"].includes(M.role)&&function(){switch(M.role){case"Admin":return"Received"===(null===r||void 0===r?void 0:r.status);case"Cashier":return"Payment"===(null===r||void 0===r?void 0:r.status);case"Evaluation":return"Evaluating"===(null===r||void 0===r?void 0:r.status);case"Director":case"Registrar":return"Evaluated"===(null===r||void 0===r?void 0:r.status);case"Releasing":return"Signed"===(null===r||void 0===r?void 0:r.status)}}()?Object(c.jsxs)("button",{className:"btn btn-info btn-sm ".concat(y(p||!r.acknowledged,"disabled")),onClick:function(e){e.preventDefault(),$("#forwardRequestModal").modal("toggle")},disabled:p||!r.acknowledged,children:[Object(c.jsx)("i",{className:"fas fa-bell"})," ",r.acknowledged?Y:"You must acknowledge the request first"]}):null,"Evaluation"===M.role?Object(c.jsxs)("button",{className:"btn btn-info btn-sm ".concat(y(p||!r.acknowledged,"disabled")),onClick:function(e){e.preventDefault(),$("#forwardRequestModal").modal("toggle")},disabled:p||!r.acknowledged,children:[Object(c.jsx)("i",{className:"fas fa-bell"})," ",r.acknowledged?"Forward":"You must acknowledge the request first"]}):null,Object(c.jsxs)("button",{className:"btn btn-success btn-sm",onClick:function(e){e.preventDefault(),V()},children:[Object(c.jsx)("i",{className:"fas fa-print"})," Export to PDF"]})]}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{className:"card-title",children:["Requester's Name: ",r.user.name]}),Object(c.jsxs)("p",{className:"card-text",children:["Document Type: ",r.documentType.name]}),Object(c.jsxs)("p",{className:"card-text",children:["Expired: ",r.expired?"Yes":"No"]}),Object(c.jsxs)("p",{className:"card-text",children:["Acknowledged: ",r.acknowledged?"Yes":"No"]}),(null===(e=r.user)||void 0===e?void 0:e.student_id_number)?Object(c.jsxs)("p",{className:"card-text",children:["Student ID Number: ",r.user.student_id_number]}):null,Object(c.jsxs)("p",{className:"card-text",children:["Evaluation: ",r.evaluation]}),Object(c.jsxs)("p",{className:"card-text",children:["Last Updated By:"," ",r.logs&&r.logs.length>0&&"Applicant"!==r.logs[r.logs.length-1].user.role?"".concat(r.logs[r.logs.length-1].user.name," - ").concat(g()(r.updated_at).format("MMMM DD, YYYY hh:mm A")):"N/A"]}),Object(c.jsxs)("p",{className:"card-text",children:["Status: ",r.status]}),Object(c.jsx)("p",{className:"card-title",children:"Files:"}),Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsx)("div",{className:"row",children:null===(t=r.files)||void 0===t?void 0:t.map((function(e,t){var a,n;return Object(c.jsx)("div",{className:"col-12 col-md-4 col-lg-3 col-xl-2",children:Object(c.jsx)("a",{href:"".concat(null===(a=e.file)||void 0===a?void 0:a.url,"&download=true"),children:null===(n=e.file)||void 0===n?void 0:n.name})},t)}))})}),Object(c.jsx)("ul",{className:"list-group",children:function(e){var t=e.level;return e.statuses.map((function(e,a){var n;return Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsxs)("div",{className:"d-flex align-items-center",children:[0!==t?H(e)?Object(c.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):t>=a+1?Object(c.jsx)("i",{className:"bi bi-check-circle mr-1"}):Object(c.jsx)("i",{className:"bi bi-circle mr-1"}):Object(c.jsx)("i",{className:"bi bi-x-circle-fill mr-1"}),e," ",H(e)?"- ".concat(g()(null===(n=H(e))||void 0===n?void 0:n.date).format("MMMM DD, YYYY hh:mm A")):""]}),r.tasks&&r.tasks.length>0?Object(c.jsx)("ul",{className:"list-group mt-2",children:r.tasks.filter((function(t){return t.for===e})).map((function(t,a){return Object(c.jsx)("li",{className:"list-group-item",children:Object(c.jsxs)("div",{className:"d-flex align-items-center",children:[t.done?Object(c.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):Object(c.jsx)("i",{className:"bi bi-circle mr-1"}),Object(c.jsx)("span",{children:t.title}),(n=e,(["Payment","Paid"].includes(n)?"Cashier"===M.role:["Received"].includes(n)?"Admin"===M.role:["Evaluated"].includes(n)?"Evaluation"===M.role:["Signed"].includes(n)?"Director"===M.role||"Registrar"===M.role:["Releasing","Released"].includes(n)?"Releasing"===M.role:n===M.role)?Object(c.jsx)("div",{className:"ml-auto",children:t.done?Object(c.jsx)("i",{className:"bi bi-check-circle-fill mx-1 clickable",title:"Mark as Not Done",onClick:function(){return F(t,!1)}}):Object(c.jsx)("i",{className:"bi bi-check-circle mx-1 clickable",title:"Mark as Done",onClick:function(){return F(t,!0)}})}):null)]})},a);var n}))}):null]},a)}))}(function(e){var t=function(e){switch(e){case"Received":return 1;case"Payment":return 2;case"Evaluating":return 3;case"Evaluated":case"Signed":case"Releasing":return 4;case"Released":return 5;default:return 0}}(e);return{statuses:re.filter((function(e){return!["Released","Evaluated"].includes(e)})),level:t}}(r.status))}),Object(c.jsxs)("div",{className:"card w-100 mx-1 my-4 shadow rounded",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsx)("h4",{className:"card-title",children:"History"})}),Object(c.jsx)("div",{className:"card-body table-responsive",style:{overflowY:"hidden"},children:Object(c.jsxs)("table",{className:"table table-sm text-center",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"User"}),Object(c.jsx)("th",{children:"Action"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsxs)("tbody",{children:[0===r.logs.length?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{}),Object(c.jsx)("td",{children:"No Data"}),Object(c.jsx)("td",{})]}):null,r.logs.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.user.name}),Object(c.jsx)("td",{children:e.action}),Object(c.jsx)("td",{children:g()(e.updated_at).format("MMMM DD, YYYY hh:mm A")})]},t)}))]})]})})]})]})]}):Object(c.jsx)("div",{className:"d-flex h-100 w-100",children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(c.jsx)("div",{className:"modal fade",id:"deleteRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteRequestModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",id:"deleteRequestModalLabel",children:"Delete Request"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:"Are you sure you want to delete this request?"}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),$("#deleteRequestModal").modal("hide"),U()},children:"Confirm"}),Object(c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(c.jsx)("div",{className:"modal fade",id:"forwardRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"forwardRequestModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",id:"forwardRequestModalLabel",children:"Forward Request"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"modal-body",children:["Evaluation"===M.role?Object(c.jsx)("select",{className:"form-control",onChange:function(e){w(e.target.value)},children:["Registrar","Director"].map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))}):null,Object(c.jsx)("label",{children:"SMS Message"}),Object(c.jsx)("textarea",{cols:20,rows:5,className:"form-control mb-3",onChange:function(e){return R(e.target.value)},value:S}),Object(c.jsx)("label",{children:"Email Message"}),Object(c.jsx)(je,{onChange:function(e){return E(e)},value:A})]}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),$("#forwardRequestModal").modal("hide"),J(N)},children:"Forward"}),Object(c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(c.jsx)("iframe",{title:"Print Page",id:"iframe",className:"d-none"})]})}function me(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:oe}),Object(c.jsx)(j.a,{path:t(U.INACTIVE),component:le}),Object(c.jsx)(j.a,{path:t(U.ARCHIVED),component:ne}),Object(c.jsx)(j.a,{path:t("/add"),component:ie}),Object(c.jsx)(j.a,{path:t("/:id"),exact:!0,component:be}),Object(c.jsx)(j.a,{path:t("/:id/edit"),component:ie})]})}function he(e){var t=e.cms,a=e.onChange,s=Object(n.useState)(t.value),r=Object(G.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)("View"),d=Object(G.a)(o,2),u=d[0],j=d[1],b=Object(n.useState)(!1),m=Object(G.a)(b,2),h=m[0],p=m[1],x=t.key.includes("picture"),O=Object(n.createRef)(),v=new FileReader;return v.onload=function(e){e.target&&e.target.result&&l(String(e.target.result))},Object(c.jsx)("div",{className:"col-12 col-md-4 col-lg-3 border-0 p-3 mb-4 d-flex",children:Object(c.jsxs)("div",{className:"card",style:{flex:1},children:[x?Object(c.jsx)("img",{className:"card-img-top",src:i,alt:t.key,style:{borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}}):null,Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("h6",{className:"card-title",children:t.key}),Object(c.jsxs)("small",{className:"text-muted form-text mb-4 mt-0",children:["Last Updated: ",g()(t.updated_at).fromNow()]}),"View"===u?Object(c.jsx)("p",{children:x?null:Object(c.jsx)("b",{children:i})}):null,"Edit"===u?x?Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{className:"btn btn-info btn-sm ".concat(y(h,"disabled")),disabled:h,onClick:function(e){e.preventDefault(),!h&&O.current&&O.current.click()},children:h?"Uploaded":"Upload"}),Object(c.jsx)("input",{type:"file",ref:O,className:"d-none",onChange:function(e){e.target.files&&e.target.files.length>0&&!h&&(v.readAsDataURL(e.target.files[0]),p(!0))}})]}):Object(c.jsx)("input",{type:"text",className:"form-control form-control-sm",value:i,placeholder:"Value",onChange:function(e){l(e.target.value)}}):null]})}),Object(c.jsx)("div",{className:"card-footer",children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("button",{className:"btn btn-success btn-sm d-inline-block mx-1",onClick:function(e){e.preventDefault(),"Edit"===u?(a(i,(function(){f.a.info("".concat(t.key," has been updated."),"Notice"),p(!1)})),j("View")):j("Edit")},children:"Edit"===u?"Save":"Edit"}),"Edit"===u?Object(c.jsx)("button",{className:"btn btn-danger btn-sm d-inline-block mx-1",onClick:function(e){e.preventDefault(),j("View")},children:"Cancel"}):null]})})]})})}function pe(e){var t=e.faq,a=e.onChange,s=e.defaultMode,r=Object(n.useState)(s||"View"),i=Object(G.a)(r,2),l=i[0],o=i[1],d=Object(n.useState)(t.question),u=Object(G.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(t.answer),h=Object(G.a)(m,2),p=h[0],x=h[1];return Object(c.jsxs)("div",{className:"col-12",children:["View"===l?Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{htmlFor:"question",children:["Question: ",Object(c.jsx)("b",{children:t.question})]}),Object(c.jsxs)("p",{children:["Answer: ",Object(c.jsx)("b",{children:t.answer})]})]}):null,"Edit"===l?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"text",name:"question",placeholder:"Question",className:"form-control form-control-sm",value:j,onChange:function(e){b(e.target.value)}})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"text",name:"answer",placeholder:"Answer",className:"form-control form-control-sm",value:p,onChange:function(e){x(e.target.value)}})})]}):null,Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("button",{className:"btn btn-success btn-sm d-inline-block mx-1",onClick:function(e){e.preventDefault(),"Edit"===l?(a({question:j,answer:p},(function(){f.a.info("FAQs has been updated.","Notice")})),o("View")):o("Edit")},children:"Edit"===l?"Save":"Edit"}),"Edit"===l?Object(c.jsx)("button",{className:"btn btn-danger btn-sm d-inline-block mx-1",onClick:function(e){e.preventDefault(),o("View"),b(t.question),x(t.answer)},children:"Cancel"}):null]})]})}function fe(){var e,t=Object(n.useState)([]),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)("Manage"),l=Object(G.a)(i,2),u=l[0],m=l[1],h=Object(j.f)(),p=JSON.parse(function(e,t){var a=s.find((function(t){return t.key===e}));return a?a.value:t}("faqs",JSON.stringify([]))),x=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/cms");case 3:t=e.sent,a=t.data,r(Object(b.a)(a)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.toJSON()),f.a.error("Unable to fetch CMS entities.","Oops!"),h.goBack();case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=5;break}return e.next=3,te.a.put("/cms",t);case 3:e.next=7;break;case 5:return e.next=7,te.a.post("/cms",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(o.a.mark((function e(t,a){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.splice(a,1,t),c=s.find((function(e){return"faqs"===e.key})),n=JSON.stringify(p),!c){e.next=11;break}return c.value=n,s.splice(s.findIndex((function(e){return"faqs"===e.key})),1,c),r(Object(b.a)(s)),e.next=9,O(c);case 9:e.next=15;break;case 11:return s.push({key:"faqs",value:n}),r(Object(b.a)(s)),e.next=15,O({key:"faqs",value:n});case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),Object(c.jsx)("div",{className:"".concat("Preview"===u?"container-fluid":"container"),children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),m("Preview"===u?"Manage":"Preview")},children:"Preview"===u?"Manage":"Preview"})}),"Manage"===u?Object(c.jsxs)(c.Fragment,{children:[s.filter((function(e){return"faqs"!==e.key})).map((function(e,t){return Object(c.jsx)(he,{cms:e,onChange:function(){var t=Object(d.a)(o.a.mark((function t(a,c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.value=a,t.next=4,O(e);case 4:c(),x(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.toJSON()),f.a.error("Unable to update CMS entity.","Oops!");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()},t)})),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("h3",{className:"mb-0",children:"FAQs"}),s.find((function(e){return"faqs"===e.key}))&&s.find((function(e){return"faqs"===e.key})).updated_at?Object(c.jsxs)("small",{className:"text-muted mt-0 form-text mb-3",children:["Last Updated: ",g()(null===(e=s.find((function(e){return"faqs"===e.key})))||void 0===e?void 0:e.updated_at).fromNow()]}):null,Object(c.jsx)("button",{className:"btn btn-success btn-sm",onClick:function(e){e.preventDefault();var t=s.find((function(e){return"faqs"===e.key}));if(t){var a=JSON.parse(t.value);a.push({question:"",answer:"",new:!0}),t.value=JSON.stringify(a);var c=s.findIndex((function(e){return"faqs"===e.key}));s.splice(c,1,t),r(Object(b.a)(s))}else{s.push({key:"faqs",value:JSON.stringify([{question:"",answer:"",new:!0}])}),r(Object(b.a)(s))}},children:"Add FAQ"}),Object(c.jsx)("hr",{})]}),p.map((function(e,t){return Object(c.jsx)(pe,{faq:e,onChange:function(){var e=Object(d.a)(o.a.mark((function e(a,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(a,t);case 3:c(),x(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.toJSON()),f.a.error("Unable to update FAQs.","Oops!");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),defaultMode:e.new?"Edit":"View"},t)}))]}):Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("div",{style:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"},children:Object(c.jsx)("iframe",{title:"CMS Preview",src:"".concat(window.location.origin,"?preview=true"),style:{position:"absolute",inset:0,width:"100%",height:"100%"}})})})]})})}function xe(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(j.g)(),m=Object(j.f)(),p=function(e){return"".concat(b.path).concat(e)},x=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.get("/contacts");case 4:t=e.sent,a=t.data,s(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch contacts.");case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.delete("/contacts?id=".concat(t));case 4:return f.a.success("Contact deleted successfully."),e.next=7,x();case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),D(e.t0),u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),Object(c.jsx)(Z,{title:"Contacts",data:a.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{created_at:g()(e.created_at).fromNow(),updated_at:g()(e.updated_at).fromNow(),message:Object(c.jsxs)("p",{className:"text-muted m-0 p-0",children:[e.message.substr(0,15),"..."]})})})),processing:l,onAddClick:function(){return m.push(p("add"))},onViewClick:function(e){var t=e.id;m.push(p("".concat(t)))},onEditClick:function(){},onDeleteConfirm:function(e){var t=e.id;O(t)},onRefreshClick:x,withAction:!0,pagination:!0,dontShowEdit:!0,disableAddButton:!0})}function Oe(){var e=Object(n.useState)(null),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(j.f)(),i=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/contacts/show?id=".concat(t));case 3:a=e.sent,c=a.data,s(c),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),D(e.t0),r.goBack();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),l=!1,u=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return l=!0,e.prev=3,e.next=6,te.a.delete("/contacts?id=".concat(null===a||void 0===a?void 0:a.id));case 6:f.a.success("Contact deleted successfully."),r.goBack(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),D(e.t0);case 13:return e.prev=13,l=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),b=Object(j.g)().params;return Object(n.useEffect)((function(){i(b.id)}),[]),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("h3",{className:"mb-0",children:"View Contact"})}),Object(c.jsxs)("div",{className:"col-12 d-flex",children:[Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:function(e){e.preventDefault(),r.goBack()},children:"Back"}),Object(c.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:function(e){e.preventDefault(),$("#deleteContactModal").modal("show")},children:"Delete"})]}),Object(c.jsx)("div",{className:"col-12",children:a?Object(c.jsx)("div",{className:"card shadow rounded",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h6",{children:"Name"}),Object(c.jsx)("p",{children:a.name}),Object(c.jsx)("h6",{children:"Email"}),Object(c.jsx)("p",{children:a.email}),Object(c.jsx)("h6",{children:"Message"}),Object(c.jsx)("p",{children:a.message})]})}):Object(c.jsx)("div",{className:"d-flex h-100 w-100",children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(c.jsx)("div",{className:"modal fade",id:"deleteContactModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteContactModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",id:"deleteContactModalLabel",children:"Delete Contact"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete ",(null===a||void 0===a?void 0:a.name)||"this contact","?"]}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),$("#deleteContactModal").modal("hide"),u()},children:"Confirm"}),Object(c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})})]})}function ve(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:xe}),Object(c.jsx)(j.a,{path:t("/:id"),exact:!0,component:Oe})]})}function ge(){var e,t=Object(n.useState)(!1),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)("Add"),l=Object(G.a)(i,2),u=l[0],m=l[1],p=Object(n.useState)([]),x=Object(G.a)(p,2),O=x[0],v=x[1],g=Object(n.useState)({id:-1,name:"",requirements:[],expiry_days:15}),N=Object(G.a)(g,2),w=N[0],k=N[1],C=Object(j.f)(),S=function(e){var t=e.target,a=t.id,c=t.value;k(Object(h.a)(Object(h.a)({},w),{},Object(se.a)({},a,c)))},R=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return r(!0),e.prev=3,t=new FormData,delete w.files,Object.entries(w).forEach((function(e){var a=Object(G.a)(e,2),c=a[0],n=a[1];return t.append(c,n)})),t.append("requirements",JSON.stringify(w.requirements)),t.append("_method","Add"===u?"post":"put"),O.forEach((function(e){e.file instanceof File&&t.append("files[]",e.file)})),e.next=12,te.a.post("/document-types",t);case 12:f.a.success("Document Type saved successfully."),k({name:"",id:-1,requirements:[],expiry_days:15}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),D(e.t0);case 19:return e.prev=19,r(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("Edit"),e.prev=1,e.next=4,te.a.get("/document-types/show?id=".concat(t));case 4:a=e.sent,c=a.data,k((function(){return Object(h.a)(Object(h.a)({},c),{},{requirements:function(e){if(!e)return[];try{var t=JSON.parse(e);return t||[]}catch(a){return console.log(a.toJSON()),[]}}(c.requirements)})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),D(e.t0),C.goBack();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),q=Object(j.g)(),A=q.params,E=q.path;return Object(n.useEffect)((function(){E.includes("edit")&&_(A.id)}),[]),Object(c.jsxs)("form",{className:"container",onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsxs)("h3",{className:"align-self-center mb-0",children:[u," Document"]}),Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:function(e){e.preventDefault(),C.goBack()},children:"Back"})]}),Object(c.jsxs)("div",{className:"form-group text-primary",children:[Object(c.jsx)("label",{htmlFor:"name"}),Object(c.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:w.name,onChange:S})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"expiry_days",children:"Expiry Days"}),Object(c.jsx)("input",{type:"number",name:"expiry_days",id:"expiry_days",placeholder:"Expiry Days",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:w.expiry_days,onChange:S})]}),Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("h4",{children:"Requirements"}),Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),w.requirements.push(""),k(Object(h.a)({},w))},children:"Add Requirement"})]}),w.requirements.map((function(e,t){return Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),w.requirements.splice(t,1),k(Object(h.a)({},w))},children:"Remove Requirement"}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:["Requirement ",t+1]}),Object(c.jsx)("input",{type:"text",placeholder:"Requirement ".concat(t+1),className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:e,onChange:function(e){w.requirements.splice(t,1,e.target.value),k(Object(h.a)({},w))}})]})]},t)})),Object(c.jsxs)("div",{className:"col-12 mt-3",children:[Object(c.jsx)("h4",{children:"Forms"}),Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),O.push({file:null,ref:Object(n.createRef)()}),v(Object(b.a)(O))},children:"Add Form"})]}),O.map((function(e,t){return Object(c.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3",children:[Object(c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),O.splice(t,1),v(Object(b.a)(O))},children:"Remove Form"}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("input",{type:"file",ref:e.ref,className:"d-none ".concat(y(s||null!==e,"disabled")),disabled:s||null!==e.file,onChange:function(a){a.target.files&&a.target.files.length>0&&(O.splice(t,1,{file:a.target.files[0],ref:e.ref}),v(Object(b.a)(O)))}}),Object(c.jsx)("button",{className:"btn btn-secondary btn-sm",disabled:null!==e.file,onClick:function(t){t.preventDefault(),null===e.file&&e.ref.current&&(e.ref.current.click(),console.log("yo"))},children:null===e.file?"Upload":"Uploaded"})]})]},t)})),"Edit"===u&&w.files&&w.files.length>0?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"col-12 mt-3",children:Object(c.jsx)("h4",{children:"Existing Forms"})}),null===(e=w.files)||void 0===e?void 0:e.map((function(e,t){var a,n;return Object(c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{className:"card-body d-flex align-items-center",children:[Object(c.jsx)("a",{href:"".concat(null===(a=e.file)||void 0===a?void 0:a.url,"&download=true"),target:"_blank",rel:"noreferrer",children:null===(n=e.file)||void 0===n?void 0:n.name}),Object(c.jsx)("button",{className:"btn btn-danger btn-sm ml-auto",onClick:function(){var a=Object(d.a)(o.a.mark((function a(c){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.preventDefault(),!window.confirm("Delete file?")){a.next=8;break}return f.a.info("Deleting form file.","Notice"),a.next=5,te.a.delete("/document-types/files?id=".concat(e.id));case 5:f.a.success("Form file deleted."),null===(n=w.files)||void 0===n||n.splice(t,1),k(Object(h.a)({},w));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),children:"Delete"})]})})},t)}))]}):null]})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(y(s,"disabled")),disabled:s,children:s?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function Ne(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(j.g)(),m=Object(j.f)(),p=function(e){return"".concat(b.path).concat(e)},x=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.get("/document-types");case 4:t=e.sent,a=t.data,s(_(a,["requirements","files"])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch Document Types.");case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.delete("/document-types?id=".concat(t));case 4:return f.a.success("Document Type deleted successfully."),e.next=7,x();case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to delete Document Type."),u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),Object(c.jsx)(Z,{title:"Document Types",columns:S(a).map((function(e){return["updated at","created at"].includes(e.toLowerCase())?C(e.split(" ")[0]):e})),data:a.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{created_at:g()(e.created_at).fromNow(),updated_at:g()(e.updated_at).fromNow()})})),processing:l,onAddClick:function(){return m.push(p("add"))},onViewClick:function(e){var t=e.id;m.push(p("".concat(t)))},onEditClick:function(e){var t=e.id;m.push(p("".concat(t,"/edit")))},onDeleteConfirm:function(e){var t=e.id;O(t)},onRefreshClick:x,withAction:!0,pagination:!0})}function we(){var e,t,a=Object(n.useState)(null),s=Object(G.a)(a,2),r=s[0],i=s[1],l=Object(j.f)(),u=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/document-types/show?id=".concat(t));case 3:a=e.sent,c=a.data,i(Object(h.a)(Object(h.a)({},c),{},{requirements:function(e){if(!e)return[];try{var t=JSON.parse(e);return t||[]}catch(a){return console.log(a.toJSON()),[]}}(c.requirements)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),D(e.t0),l.goBack();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b=Object(j.g)().params;return Object(n.useEffect)((function(){u(b.id)}),[]),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("h3",{className:"mb-0",children:"View Document Type"})}),Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),l.goBack()},children:"Back"})}),Object(c.jsx)("div",{className:"col-12",children:r?Object(c.jsx)("div",{className:"card shadow rounded",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h6",{children:"Name"}),Object(c.jsx)("p",{children:r.name}),Object(c.jsx)("h6",{children:"Requirements"}),null===(e=r.requirements)||void 0===e?void 0:e.map((function(e,t){return Object(c.jsx)("p",{className:"card-text",children:e},t)})),Object(c.jsx)("h6",{children:"Forms"}),null===(t=r.files)||void 0===t?void 0:t.map((function(e,t){var a,n;return Object(c.jsx)("p",{className:"card-text",children:Object(c.jsx)("a",{href:"".concat(null===(a=e.file)||void 0===a?void 0:a.url,"&download=true"),target:"_blank",rel:"noreferrer",children:null===(n=e.file)||void 0===n?void 0:n.name})},t)}))]})}):Object(c.jsx)("div",{className:"d-flex h-100 w-100",children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]})})}function ye(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:Ne}),Object(c.jsx)(j.a,{path:t("/add"),component:ge}),Object(c.jsx)(j.a,{path:t("/:id"),exact:!0,component:we}),Object(c.jsx)(j.a,{path:t("/:id/edit"),component:ge})]})}function ke(){var e=Object(n.useState)(!1),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)({id:-1,name:"",file:null,category:""}),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(j.f)(),m=new FileReader;m.onload=function(e){e.target&&e.target.result&&(l.file=String(e.target.result),u(Object(h.a)({},l)))};var p=Object(n.createRef)(),x=Object(n.createRef)(),O=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.prev=3,e.next=6,te.a.post("/downloadables",l);case 6:f.a.success("Downloadable saved successfully."),u({name:"",file:null}),x.current&&x.current.reset(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),D(e.t0);case 14:return e.prev=14,s(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("form",{className:"container",ref:x,onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h3",{className:"align-self-center mb-0",children:"Create Downloadable"}),Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:function(e){e.preventDefault(),b.goBack()},children:"Back"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"category",children:"Category"}),Object(c.jsx)("input",{type:"text",name:"category",id:"category",placeholder:"Category",className:"form-control form-control-sm ".concat(y(a,"disabled")),disabled:a,value:l.category,onChange:function(e){l.category=e.target.value,u(Object(h.a)({},l))}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("button",{className:"btn btn-info btn-sm ".concat(y(a||null!==l.file,"disabled")),disabled:a||null!==l.file,onClick:function(e){e.preventDefault(),null===l.file&&p.current.click()},children:null===l.file?"Upload File":"File Uploaded"}),Object(c.jsx)("input",{type:"file",ref:p,className:"form-control form-control-sm ".concat(y(a,"disabled")," d-none"),disabled:a,onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=e.target.files[0];m.readAsDataURL(t),l.name=t.name,u(Object(h.a)({},l))}}})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(y(a,"disabled")),disabled:a,children:a?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function Ce(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(j.g)(),m=Object(j.f)(),p=function(e){return"".concat(b.path).concat(e)},x=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.get("/downloadables");case 4:t=e.sent,a=t.data,s(_(a,["file_id"])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch Downloadables.");case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.delete("/downloadables?id=".concat(t));case 4:return f.a.success("Downloadable deleted successfully."),e.next=7,x();case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to delete Downloadable."),u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),Object(c.jsx)(Z,{title:"Downloadables",columns:S(a).map((function(e){return["updated at","created at"].includes(e.toLowerCase())?C(e.split(" ")[0]):e})),data:a.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{file:Object(c.jsx)("a",{href:"".concat(e.file.url,"&download=true"),className:"btn btn-success btn-sm",children:"Download"}),created_at:g()(e.created_at).fromNow(),updated_at:g()(e.updated_at).fromNow()})})),processing:l,onAddClick:function(){return m.push(p("add"))},onViewClick:function(e){var t=e.id;m.push(p("".concat(t)))},onEditClick:function(e){var t=e.id;m.push(p("".concat(t,"/edit")))},onDeleteConfirm:function(e){var t=e.id;O(t)},onRefreshClick:x,withAction:!0,pagination:!0,dontShowEdit:!0,dontShowView:!0})}function De(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:Ce}),Object(c.jsx)(j.a,{path:t("/add"),component:ke})]})}function Se(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/logs");case 3:t=e.sent,a=t.data,s(Object(b.a)(a)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.toJSON()),D(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r()}),[]),Object(c.jsxs)("div",{className:"card w-100",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("h3",{className:"card-title",children:"History Logs"}),0===a.length?Object(c.jsx)("p",{className:"card-text",children:"No Data"}):null]}),Object(c.jsx)("div",{className:"card-body table-responsive",style:{overflowY:"hidden"},children:Object(c.jsxs)("table",{className:"table table-sm text-center",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"User"}),Object(c.jsx)("th",{children:"Action"}),Object(c.jsx)("th",{children:"Request Type"}),Object(c.jsx)("th",{children:"Requester's Name"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsx)("tbody",{children:Object(b.a)(a).reverse().map((function(e,t){var a,n,s,r,i;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:null===(a=e.user)||void 0===a?void 0:a.name}),Object(c.jsx)("td",{children:e.action}),Object(c.jsx)("td",{children:null===(n=e.loggable)||void 0===n||null===(s=n.documentType)||void 0===s?void 0:s.name}),Object(c.jsx)("td",{children:null===(r=e.loggable)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.name}),Object(c.jsx)("td",{children:g()(e.updated_at).format("MMMM DD, YYYY hh:mm A")})]},t)}))})]})})]})}function Re(){var e=Object(n.useState)({users:0,logs:0,approved_requests:0,pending_requests:0,last_log:null}),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(j.g)(),i=function(e){var t=r.path.split("");return"/"===t[t.length-1]&&t.splice(t.length-1,1),"".concat(t.join("")).concat(e)},l=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/statistics");case 3:t=e.sent,a=t.data,s(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.toJSON());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(c.jsxs)("div",{className:"card card-stats",children:[Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-5 col-md-4",children:Object(c.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(c.jsx)("i",{className:"nc-icon nc-globe text-warning"})})}),Object(c.jsx)("div",{className:"col-7 col-md-8",children:Object(c.jsxs)("div",{className:"numbers",children:[Object(c.jsx)("p",{className:"card-category",children:"Pending Requests"}),Object(c.jsx)("p",{className:"card-title",children:a.pending_requests}),Object(c.jsx)("p",{})]})})]})}),Object(c.jsxs)("div",{className:"card-footer",children:[Object(c.jsx)("hr",{}),Object(c.jsxs)(u.b,{to:i(U.ROOT),className:"stats",children:[Object(c.jsx)("i",{className:"fa fa-edit"}),"View"]})]})]})}),Object(c.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(c.jsxs)("div",{className:"card card-stats",children:[Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-5 col-md-4",children:Object(c.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(c.jsx)("i",{className:"nc-icon nc-money-coins text-success"})})}),Object(c.jsx)("div",{className:"col-7 col-md-8",children:Object(c.jsxs)("div",{className:"numbers",children:[Object(c.jsx)("p",{className:"card-category",children:"Completed Requests"}),Object(c.jsx)("p",{className:"card-title",children:a.approved_requests}),Object(c.jsx)("p",{})]})})]})}),Object(c.jsxs)("div",{className:"card-footer ",children:[Object(c.jsx)("hr",{}),Object(c.jsxs)(u.b,{to:i(U.ROOT),className:"stats",children:[Object(c.jsx)("i",{className:"fa fa-calendar-o"}),"View"]})]})]})}),Object(c.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(c.jsxs)("div",{className:"card card-stats",children:[Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-5 col-md-4",children:Object(c.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(c.jsx)("i",{className:"nc-icon nc-vector text-danger"})})}),Object(c.jsx)("div",{className:"col-7 col-md-8",children:Object(c.jsxs)("div",{className:"numbers",children:[Object(c.jsx)("p",{className:"card-category",children:"Total Logs"}),Object(c.jsx)("p",{className:"card-title",children:a.logs}),Object(c.jsx)("p",{})]})})]})}),Object(c.jsxs)("div",{className:"card-footer ",children:[Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"stats",children:[Object(c.jsx)("i",{className:"fa fa-clock-o"}),g()(a.last_log?a.last_log.updated_at:new Date).fromNow()]})]})]})}),Object(c.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(c.jsxs)("div",{className:"card card-stats",children:[Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-5 col-md-4",children:Object(c.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(c.jsx)("i",{className:"nc-icon nc-favourite-28 text-primary"})})}),Object(c.jsx)("div",{className:"col-7 col-md-8",children:Object(c.jsxs)("div",{className:"numbers",children:[Object(c.jsx)("p",{className:"card-category",children:"Users"}),Object(c.jsx)("p",{className:"card-title",children:a.users}),Object(c.jsx)("p",{})]})})]})}),Object(c.jsxs)("div",{className:"card-footer ",children:[Object(c.jsx)("hr",{}),Object(c.jsxs)(u.b,{to:i(T),className:"stats",children:[Object(c.jsx)("i",{className:"fa fa-refresh"}),"View"]})]})]})})]}),Object(c.jsx)(Se,{})]})}function _e(){var e=Object(n.useState)(!1),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)("Add"),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(n.useState)({id:-1,name:"",email:"",password:"",role:"Applicant",phone:"63"}),m=Object(G.a)(b,2),p=m[0],x=m[1],O=Object(j.f)(),v=function(e){var t=e.target,a=t.id,c=t.value;x(Object(h.a)(Object(h.a)({},p),{},Object(se.a)({},a,c)))},g=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.prev=3,e.next=6,"Add"===l?te.a.post("/users",p):te.a.put("/users",p);case 6:f.a.success("User saved successfully."),"Add"===l&&x({name:"",email:"",password:"",role:p.role,id:-1,phone:"63"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),D(e.t0);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("Edit"),e.prev=1,e.next=4,te.a.get("/users/show?id=".concat(t));case 4:a=e.sent,(c=a.data).password="",x(c),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),D(e.t0),O.goBack();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),w=Object(j.g)(),k=w.params,C=w.path;return Object(n.useEffect)((function(){C.includes("edit")&&N(k.id)}),[]),Object(c.jsxs)("form",{className:"container",onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsxs)("h3",{className:"align-self-center mb-0",children:[l," User"]}),Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:function(e){e.preventDefault(),O.goBack()},children:"Back"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"form-control form-control-sm ".concat(y(a,"disabled")),disabled:a,value:p.name,onChange:v})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email",className:"form-control form-control-sm ".concat(y(a,"disabled")),disabled:a,value:p.email,onChange:v})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(c.jsx)("input",{type:"text",name:"phone",id:"phone",placeholder:"Phone",className:"form-control form-control-sm ".concat(y(a,"disabled")),disabled:a,value:p.phone,onChange:v})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(y(a,"disabled")),disabled:a,value:p.password,onChange:v})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"role",children:"Role"}),Object(c.jsx)("select",{name:"role",id:"role",className:"form-control form-control-sm",value:p.role,onChange:v,children:["Admin","Cashier","Evaluation","Director","Registrar","Releasing","Applicant"].map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(y(a,"disabled")),disabled:a,children:a?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function qe(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],b=i[1],m=Object(j.g)(),p=Object(j.f)(),x=function(e){return"".concat(m.path).concat(e)},O=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,te.a.get("/users");case 4:t=e.sent,a=t.data,s(_(a,["profile_picture_id"])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch users.");case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,te.a.delete("/users?id=".concat(t));case 4:return f.a.success("User deleted successfully."),e.next=7,O();case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),D(e.t0),b(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){O()}),[]);return Object(c.jsx)(Z,{title:"Users",columns:S(a).map((function(e){return["updated at","created at"].includes(e.toLowerCase())?C(e.split(" ")[0]):"profile picture"===e.toLowerCase()?"":e})),data:a.map((function(e){var t,a;return Object(h.a)(Object(h.a)({},e),{},{created_at:g()(e.created_at).fromNow(),updated_at:g()(e.updated_at).fromNow(),role:Object(c.jsx)("span",{className:"badge badge-".concat((a=e.role,"Admin"===a?"red":"Applicant"===a?"warning":"green")),children:e.role}),profilePicture:Object(c.jsx)(u.b,{to:x("".concat(e.id)),children:Object(c.jsx)("img",{src:(null===(t=e.profilePicture)||void 0===t?void 0:t.url)||"https://via.placeholder.com/40",className:"rounded-circle shadow-sm border img-fluid d-none d-xl-block",style:{height:"40px",width:"40px"},alt:"Profile"})})})})),processing:l,onAddClick:function(){return p.push(x("add"))},onViewClick:function(e){var t=e.id;p.push(x("".concat(t)))},onEditClick:function(e){var t=e.id;p.push(x("".concat(t,"/edit")))},onDeleteConfirm:function(e){var t=e.id;v(t)},onRefreshClick:O,withAction:!0,pagination:!0})}function Ae(){var e,t=Object(n.useState)(null),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(j.f)(),l=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/users/show?id=".concat(t));case 3:a=e.sent,c=a.data,r(c),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),D(e.t0),i.goBack();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b=!1,m=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return");case 2:return b=!0,e.prev=3,e.next=6,te.a.delete("/users?id=".concat(null===s||void 0===s?void 0:s.id));case 6:f.a.success("User deleted successfully."),i.goBack(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),D(e.t0);case 13:return e.prev=13,b=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),h=Object(j.g)().params;Object(n.useEffect)((function(){l(h.id)}),[]);var p=(null===s||void 0===s||null===(e=s.profilePicture)||void 0===e?void 0:e.url)||"https://via.placeholder.com/200";return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("h3",{className:"mb-0",children:"View User"})}),Object(c.jsxs)("div",{className:"col-12 d-flex",children:[Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:function(e){e.preventDefault(),i.goBack()},children:"Back"}),Object(c.jsx)(u.b,{to:"".concat(window.location.pathname,"/edit"),className:"btn btn-warning btn-sm align-self-center ml-auto",children:"Edit"}),Object(c.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:function(e){e.preventDefault(),$("#deleteUserModal").modal("show")},children:"Delete"})]}),Object(c.jsx)("div",{className:"col-12",children:s?Object(c.jsx)("div",{className:"card shadow rounded",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("img",{src:p,alt:"Profile",className:"img-fluid rounded-circle mb-3",style:{height:"50px",width:"50px"}}),Object(c.jsx)("h6",{children:"Name"}),Object(c.jsx)("p",{children:s.name}),Object(c.jsx)("h6",{children:"Email"}),Object(c.jsx)("p",{children:s.email}),Object(c.jsx)("h6",{children:"Phone"}),Object(c.jsx)("p",{children:s.phone}),Object(c.jsx)("h6",{children:"Role"}),Object(c.jsx)("p",{children:s.role})]})}):Object(c.jsx)("div",{className:"d-flex h-100 w-100",children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(c.jsx)("div",{className:"modal fade",id:"deleteUserModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteUserModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",id:"deleteUserModalLabel",children:"Delete User"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete ",(null===s||void 0===s?void 0:s.name)||"this user","?"]}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),$("#deleteUserModal").modal("hide"),m()},children:"Confirm"}),Object(c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})})]})}function Ee(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:qe}),Object(c.jsx)(j.a,{path:t("/add"),component:_e}),Object(c.jsx)(j.a,{path:t("/:id"),exact:!0,component:Ae}),Object(c.jsx)(j.a,{path:t("/:id/edit"),component:_e})]})}function Me(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:Re}),Object(c.jsx)(j.a,{path:t(T),component:Ee}),Object(c.jsx)(j.a,{path:t(F),component:ye}),Object(c.jsx)(j.a,{path:t(U.ROOT),component:me}),Object(c.jsx)(j.a,{path:t(Y),component:De}),Object(c.jsx)(j.a,{path:t(J),component:fe}),Object(c.jsx)(j.a,{path:t(B),component:ve})]})}function Pe(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)},a=[{url:P,icon:"nc-icon nc-bank",title:"Dashboard"},{url:t(F),icon:"nc-icon nc-book-bookmark",title:"Document Types"},{url:t(U.ROOT),icon:"nc-icon nc-tag-content",title:"Requests"},{url:t("".concat(U.ROOT).concat(U.INACTIVE)),icon:"nc-icon nc-calendar-60",title:"Inactive Requests"},{url:t("".concat(U.ROOT).concat(U.ARCHIVED)),icon:"nc-icon nc-box-2",title:"Archived Requests"},{url:t(T),icon:"nc-icon nc-single-02",title:"Users"},{url:t(J),icon:"nc-icon nc-layout-11",title:"Customization"},{url:t(B),icon:"nc-icon nc-single-copy-04",title:"Contacts"}];return Object(c.jsx)("div",{className:"sidebar-wrapper bg-maroon",style:{overflowX:"hidden"},children:Object(c.jsx)("ul",{className:"nav",children:a.map((function(e,t){return Object(c.jsx)("li",{className:y(e.url===window.location.pathname,"active"),children:Object(c.jsxs)(u.b,{to:e.url,children:[Object(c.jsx)("i",{className:e.icon}),Object(c.jsx)("p",{children:e.title})]})},t)}))})})}function Fe(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:Re}),Object(c.jsx)(j.a,{path:t(U.ROOT),component:me})]})}function Te(){var e,t=Object(j.g)(),a=[{url:P,icon:"nc-icon nc-bank",title:"Dashboard"},{url:(e=U.ROOT,"".concat(t.path).concat(e)),icon:"nc-icon nc-tag-content",title:"Requests"}];return Object(c.jsx)("div",{className:"sidebar-wrapper",style:{overflowX:"hidden"},children:Object(c.jsx)("ul",{className:"nav",children:a.map((function(e,t){return Object(c.jsx)("li",{className:y(e.url===window.location.pathname,"active"),children:Object(c.jsxs)(u.b,{to:e.url,children:[Object(c.jsx)("i",{className:e.icon}),Object(c.jsx)("p",{children:e.title})]})},t)}))})})}function Ue(){var e,t=Object(n.useState)(!1),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(Q.get("user")),l=Object(G.a)(i,2),j=l[0],b=l[1],m=Object(n.useState)((null===(e=j.profilePicture)||void 0===e?void 0:e.url)||"https://via.placeholder.com/200"),p=Object(G.a)(m,2),x=p[0],O=p[1],v=j,g=Object(n.createRef)(),N=new FileReader,w=!1;N.onload=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target||!t.target.result){e.next=22;break}if(!w){e.next=3;break}return e.abrupt("return");case 3:return w=!0,e.prev=4,e.next=7,te.a.put("/self/profile",{file:String(t.target.result)});case 7:c=e.sent,n=c.data,O((null===(a=n.profilePicture)||void 0===a?void 0:a.url)||"https://via.placeholder.com/200"),Q.set("user",n),f.a.info("Profile picture saved.","Info"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0),D(e.t0);case 18:return e.prev=18,$("#file-upload")[0].reset(),w=!1,e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[4,14,18,22]])})));return function(t){return e.apply(this,arguments)}}();var k=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,te.a.put("/self",j);case 4:t=e.sent,Q.set("user",t.data),f.a.info("Profile updated successfully.","Info"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),D(e.t0);case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){$(".main-panel").removeClass("h-100");var e=Q.listen("user",(function(e){b(Object(h.a)({},j))}));return function(){Q.unlisten("user",e)}}),[]);var C=function(e){var t=e.target,a=t.id,c=t.value;b(Object(h.a)(Object(h.a)({},j),{},Object(se.a)({},a,c)))};return Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-user w-100",children:[Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{src:"/assets/img/damir-bosnjak.jpg",alt:"..."})}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("a",{href:window.location.pathname,title:"Change Profile Picture",onClick:function(e){var t;e.preventDefault(),null===(t=g.current)||void 0===t||t.click()},children:Object(c.jsx)("img",{className:"avatar border-gray shadow-sm",src:x,alt:"..."})}),Object(c.jsx)(u.b,{to:window.location.pathname,children:Object(c.jsx)("h5",{className:"title",children:v.name})}),Object(c.jsxs)("p",{className:"description",children:["@",v.name.split(" ").join("").toLowerCase()]})]})}),Object(c.jsxs)("div",{className:"card-footer",children:[Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"button-container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-3 col-md-6 col-6 ml-auto",children:Object(c.jsxs)("h5",{children:["12",Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:"Files"})]})}),Object(c.jsx)("div",{className:"col-lg-4 col-md-6 col-6 ml-auto mr-auto",children:Object(c.jsxs)("h5",{children:["2",Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:"Requests"})]})}),Object(c.jsx)("div",{className:"col-lg-3 mr-auto",children:Object(c.jsxs)("h5",{children:["5",Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:"Logins"})]})})]})})]})]})}),Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsxs)("div",{className:"card card-user",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsx)("h5",{className:"card-title",children:"Edit Profile"})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("form",{id:"file-upload",onSubmit:function(e){return e.preventDefault()},children:Object(c.jsx)("input",{type:"file",ref:g,className:"d-none",onChange:function(e){e.target.files&&e.target.files.length>0&&N.readAsDataURL(e.target.files[0])},accept:"image/*"})}),Object(c.jsxs)("form",{onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:j.name,onChange:C})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:j.email,onChange:C})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(c.jsx)("input",{type:"text",name:"phone",id:"phone",placeholder:"Phone",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:j.phone,onChange:C})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(y(s,"disabled")),disabled:s,value:j.password,onChange:C})]})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"update ml-auto mr-auto",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-round text-center ".concat(y(s,"disabled")),style:{width:"160px"},disabled:s,children:s?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Update Profile"})})})]})]})]})})]})}function Ie(){return Object(c.jsx)("footer",{className:"footer d-none",style:{position:"absolute",bottom:0,width:"-webkit-fill-available"},children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("nav",{className:"footer-nav",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/",target:"_blank",onClick:function(e){e.preventDefault()},children:"Blog"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/",target:"_blank",onClick:function(e){e.preventDefault()},children:"Licenses"})})]})}),Object(c.jsx)("div",{className:"credits ml-auto",children:Object(c.jsxs)("span",{className:"copyright",children:["\xa9 2020, made with ",Object(c.jsx)("i",{className:"fa fa-heart heart"})," by JMM"]})})]})})})}function Ye(){var e,t=Object(n.useState)([]),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(j.g)(),l=i.path.split("/"),b=R(l[l.length-1]),m=Object(j.f)(),h=Q.get("user"),p=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.post("/auth/logout");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,Q.clear(),m.push(E),f.a.info("Logged out successfully.","Info"),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/requests/expiring");case 3:if(t=e.sent,a=t.data,!("Applicant"===h.role&&a.length>0)){e.next=7;break}return e.abrupt("return",r(Array.from(a.filter((function(e){return e.user_id===h.id})))));case 7:r(Array.from(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.toJSON());case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=setInterval((function(){return x()}),5e3);return function(){clearInterval(e)}}),[]),Object(c.jsx)("nav",{className:"navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent ",children:Object(c.jsxs)("div",{className:"container-fluid bg-grad",children:[Object(c.jsxs)("div",{className:"navbar-wrapper",children:[Object(c.jsx)("div",{className:"navbar-toggle",children:Object(c.jsxs)("button",{type:"button",className:"navbar-toggler",children:[Object(c.jsx)("span",{className:"navbar-toggler-bar bar1"}),Object(c.jsx)("span",{className:"navbar-toggler-bar bar2"}),Object(c.jsx)("span",{className:"navbar-toggler-bar bar3"})]})}),Object(c.jsx)("a",{className:"navbar-brand",href:"/",onClick:function(e){return e.preventDefault()},children:b})]}),Object(c.jsxs)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navigation","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation",children:[Object(c.jsx)("span",{className:"navbar-toggler-bar navbar-kebab"}),Object(c.jsx)("span",{className:"navbar-toggler-bar navbar-kebab"}),Object(c.jsx)("span",{className:"navbar-toggler-bar navbar-kebab"})]}),Object(c.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(c.jsxs)("ul",{className:"navbar-nav",children:[Object(c.jsx)("li",{className:"nav-item btn-rotate dropdown",children:Object(c.jsx)("div",{className:"dropdown-menu dropdown-menu-right p-0",children:s.map((function(e,t){var a;return Object(c.jsxs)(u.b,{className:"dropdown-item d-flex",to:"".concat(P).concat(U.ROOT,"/").concat(e.id),children:[Object(c.jsx)("i",{className:"nc-icon nc-key-25 align-self-center mr-1"}),Object(c.jsxs)("span",{className:"align-self-center",children:["Request for user ",null===(a=e.user)||void 0===a?void 0:a.name," is about to expire."]})]},t)}))})}),Object(c.jsxs)("li",{className:"nav-item btn-rotate dropdown",children:[Object(c.jsxs)("a",{className:"nav-link dropdown-toggle",href:"/",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-expanded":"false",children:[Object(c.jsx)("i",{className:"nc-icon nc-circle-10"}),Object(c.jsx)("p",{children:Object(c.jsx)("span",{className:"d-lg-none d-md-block",children:"Account"})})]}),Object(c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right p-0","aria-labelledby":"navbarDropdownMenuLink",children:[Object(c.jsxs)(u.b,{to:(e=I,"".concat(i.path).concat(e)),className:"dropdown-item d-flex",children:[Object(c.jsx)("i",{className:"nc-icon nc-single-02 align-self-center mr-1"}),Object(c.jsx)("span",{className:"align-self-center",children:"Profile"})]}),Object(c.jsxs)("a",{className:"dropdown-item d-flex",href:"/logout",onClick:function(e){e.preventDefault(),p()},children:[Object(c.jsx)("i",{className:"nc-icon nc-key-25 align-self-center mr-1"}),Object(c.jsx)("span",{className:"align-self-center",children:"Logout"})]})]})]})]})})]})})}function Je(){var e,t,a,s=Object(n.useState)(!0),r=Object(G.a)(s,2),i=r[0],l=r[1],u=Object(n.useState)({document_type_id:-1,approved:!1,status:"Received",user_id:Q.get("user").id,copies:1,reason:"",acknowledged_dates:JSON.stringify([])}),m=Object(G.a)(u,2),p=m[0],x=m[1],O=Object(n.useState)([]),v=Object(G.a)(O,2),g=v[0],N=v[1],w=Object(n.useState)([]),k=Object(G.a)(w,2),C=k[0],S=k[1],R=Object(n.useState)([]),_=Object(G.a)(R,2),q=_[0],A=_[1],E=Object(j.f)(),M=function(e){var t=e.target,a=t.id,c=t.value;x(Object(h.a)(Object(h.a)({},p),{},Object(se.a)({},a,c)))},P=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/document-types");case 3:if(0!==(t=e.sent).data.length){e.next=7;break}return f.a.info("There are no available documents that you can request right now. Please try again later.","Notice"),e.abrupt("return",E.goBack());case 7:A(t.data),x(Object(h.a)(Object(h.a)({},p),{},{document_type_id:t.data[0].id})),l(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.toJSON()),f.a.error("Unable to connect to server. Please try again later."),E.goBack();case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){P()}),[]);var F=Q.get("user"),T=function(){var e=Object(d.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.post("/requests/tasks",{for:"Received",title:t,request_id:a.id,done:!1,name:F.name});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.toJSON());case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:for(a in l(!0),e.prev=3,t=new FormData,p)t.append(a,p[a]);return C.filter((function(e){return e instanceof File})).forEach((function(e){return t.append("files[]",e)})),e.next=9,te.a.post("/requests",t);case 9:if(c=e.sent,!(n=c.data).documentType){e.next=14;break}return e.next=14,Promise.all(Array.from(JSON.parse((null===(s=n.documentType)||void 0===s?void 0:s.requirements)||"[]")).map((function(e){return T(e,n)})));case 14:S([]),f.a.success("Request created successfully."),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),D(e.t0);case 21:return e.prev=21,l(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,18,21,24]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("form",{className:"container text-yellow",onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,U();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("h3",{className:"align-self-center mb-0 text-yellow",children:"Create Request"}),Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:function(e){e.preventDefault(),E.goBack()},children:"Back"})]}),Object(c.jsxs)("div",{className:"form-group text-yellow",children:[Object(c.jsx)("label",{htmlFor:"document_type_id",children:"Document Type"}),Object(c.jsx)("select",{name:"document_type_id",id:"document_type_id",className:"form-control form-control-sm",onChange:M,value:p.document_type_id,children:q.map((function(e,t){return Object(c.jsx)("option",{value:e.id,children:e.name},t)}))})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"copies ",children:"Copies"}),Object(c.jsx)("input",{type:"number",name:"copies",id:"copies",placeholder:"Copies",className:"form-control form-control-sm",onChange:M,value:p.copies})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"reason",children:"Reason"}),Object(c.jsx)("input",{type:"text",name:"reason",id:"reason",placeholder:"Reason",className:"form-control form-control-sm",onChange:M,value:p.reason})]}),Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsx)("h6",{children:"Requirements"}),function(e){if(!e)return[];try{var t=JSON.parse(e);return t||[]}catch(a){return console.log(a.toJSON()),[]}}((null===(e=q.find((function(e){return Number(e.id)===Number(p.document_type_id)})))||void 0===e?void 0:e.requirements)||"").map((function(e,t){return Object(c.jsx)("p",{children:e},t)})),Object(c.jsx)("h6",{children:"Forms"}),null===(t=q.find((function(e){return Number(e.id)===Number(p.document_type_id)})))||void 0===t||null===(a=t.files)||void 0===a?void 0:a.map((function(e,t){var a,n;return Object(c.jsx)("p",{children:Object(c.jsx)("a",{href:"".concat(null===(a=e.file)||void 0===a?void 0:a.url,"&download=true"),target:"_blank",rel:"noreferrer",children:null===(n=e.file)||void 0===n?void 0:n.name})},t)})),Object(c.jsx)("h6",{children:"Compliance"}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),g.push(Object(n.createRef)()),N(Object(b.a)(g)),C.push(null),S(Object(b.a)(C))},children:"Add File"})}),g.map((function(e,t){var a;return Object(c.jsxs)("div",{className:"col-12 col-md-4 col-lg-3 col-xl-2 p-2 border rounded",children:[Object(c.jsx)("p",{children:C[t]?null===(a=C[t])||void 0===a?void 0:a.name:""}),Object(c.jsx)("button",{className:"btn ".concat(null===C[t]?"btn-secondary":"btn-danger"," btn-sm"),onClick:function(a){var c;(a.preventDefault(),null===C[t])?null===(c=e.current)||void 0===c||c.click():(C.splice(t,1),S(Object(b.a)(C)),g.splice(t,1),N(Object(b.a)(g)))},children:null===C[t]?"Upload":"Remove"}),Object(c.jsx)("input",{ref:e,type:"file",className:"d-none",onChange:function(e){e.target.files&&e.target.files.length>0&&(C.splice(t,1,e.target.files[0]),S(Object(b.a)(C)))}})]},t)}))]})})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(y(i,"disabled")),disabled:i,children:i?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function Be(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],b=Object(j.g)(),m=Object(j.f)(),p=function(e){return"".concat(b.path).concat(e)},x=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.get("/self/requests");case 4:t=e.sent,a=t.data,s(_(a,["document_type_id","file_id","user_id","file","acknowledged_dates"])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to fetch requests.");case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ae,{}),Object(c.jsx)(Z,{title:"Requests",data:a.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{documentType:e.documentType.name,approved:e.approved?"Yes":"No",expired:e.expired?Object(c.jsx)("span",{className:"badge badge-red",children:"Yes"}):Object(c.jsx)("span",{className:"badge badge-green",children:"No"}),created_at:g()(e.created_at).fromNow(),updated_at:g()(e.updated_at).fromNow(),acknowledged:e.acknowledged?Object(c.jsx)("span",{className:"badge badge-green",children:"Yes"}):Object(c.jsx)("span",{className:"badge badge-red",children:"No"}),status:e.acknowledged?Object(c.jsx)("span",{className:"badge badge-green",children:e.status}):Object(c.jsx)("span",{className:"badge badge-danger",children:"Pending"})})})),processing:l,onAddClick:function(){return m.push(p("add"))},onViewClick:function(e){var t=e.id;m.push(p("".concat(t)))},onEditClick:function(){},onDeleteConfirm:function(){},onRefreshClick:x,withAction:!0,pagination:!0,dontShowEdit:!0,dontShowDelete:!0})]})}function Le(){var e,t=Object(n.useState)(null),a=Object(G.a)(t,2),s=a[0],r=a[1],i=Object(j.f)(),l=Object(n.useState)(""),b=Object(G.a)(l,2),m=b[0],p=b[1],x=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/requests/show?id=".concat(t));case 3:a=e.sent,c=a.data,r(c),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),D(e.t0),i.goBack();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),O=Q.get("user"),v=!1,N=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:return v=!0,e.prev=3,e.next=6,te.a.delete("/requests?id=".concat(null===s||void 0===s?void 0:s.id));case 6:f.a.success("Request deleted successfully."),i.goBack(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),D(e.t0);case 13:return e.prev=13,v=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),w=Object(j.g)().params,y=window.location.origin,k=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=$(String($("#request-card")[0].innerHTML))).find("button").remove(),t.find(".bi-plus-circle").remove(),t.find('i[title="Mark as Not Done"]').remove(),t.find('i[title="Mark as Done"]').remove(),t.find('i[title="Edit"]').remove(),t.find('i[title="Delete"]').remove(),a=$("#iframe")[0],c=["https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css","https://fonts.googleapis.com/css?family=Montserrat:400,700,200",y+"/assets/css/bootstrap.min.css",y+"/assets/css/paper-dashboard.css",y+"/assets/demo/demo.css"],null===(n=a.contentWindow)||void 0===n||n.document.open(),!n||!n.document){e.next=25;break}return n.document.write("<head>"),e.next=15,Promise.all(c.map(function(){var e=Object(d.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get(t);case 3:return a=e.sent,c=a.data,e.abrupt("return","<style>".concat(c,"</style>"));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",'<link href="'.concat(t,'" rel="stylesheet" />'));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 15:s=e.sent,console.log(s),s.forEach((function(e){n.document.write(e)})),n.document.write("</head>"),n.document.write("<body>"),n.document.write(t.html()),n.document.write("</body>"),n.document.close(),n.focus(),setTimeout((function(){n.print()}),500);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.put("/requests?id=".concat(null===s||void 0===s?void 0:s.id),{evaluation:m});case 3:r(Object(h.a)(Object(h.a)({},s),{},{evaluation:m})),f.a.success("Feedback sent successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.toJSON()),f.a.error("Unable to send feedback.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=function(e){return Array.from(JSON.parse((null===s||void 0===s?void 0:s.acknowledged_dates)||"[]")).find((function(t){return t.status===e}))};return Object(n.useEffect)((function(){x(w.id)}),[]),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("h3",{className:"mb-0",children:"View Request"})}),Object(c.jsxs)("div",{className:"col-12 d-flex",children:[Object(c.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:function(e){e.preventDefault(),i.goBack()},children:"Back"}),O&&"Applicant"!==O.role?Object(c.jsx)(u.b,{to:"".concat(window.location.pathname,"/edit"),className:"btn btn-warning btn-sm align-self-center ml-auto",children:"Edit"}):null,O&&"Applicant"!==O.role?Object(c.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:function(e){e.preventDefault(),$("#deleteRequestModal").modal("show")},children:"Delete"}):null]}),Object(c.jsx)("div",{className:"col-12",id:"request-card",children:s?Object(c.jsxs)("div",{className:"card shadow rounded",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsxs)("button",{className:"btn btn-success btn-sm",onClick:function(e){e.preventDefault(),k()},children:[Object(c.jsx)("i",{className:"fas fa-print"})," Export to PDF"]})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{className:"card-title",children:["Requester's Name: ",s.user.name]}),Object(c.jsxs)("p",{className:"card-title",children:["Date: ",g()(s.updated_at).format("MMMM DD, YYYY hh:mm A")]}),Object(c.jsxs)("p",{className:"card-text",children:["Document Type: ",s.documentType.name]}),(null===(e=s.user)||void 0===e?void 0:e.student_id_number)?Object(c.jsxs)("p",{className:"card-text",children:["Student ID Number: ",s.user.student_id_number]}):null,Object(c.jsxs)("p",{className:"card-text",children:["Last Updated By:"," ",s.logs&&s.logs.length>0&&"Applicant"!==s.logs[s.logs.length-1].user.role?"".concat(s.logs[s.logs.length-1].user.name," - ").concat(g()(s.logs[s.logs.length-1].created_at).format("MMMM DD, YYYY")):"N/A"]}),Object(c.jsxs)("p",{className:"card-text mb-2",children:["Status: ",s.status]}),Object(c.jsx)("ul",{className:"list-group",children:function(e){var t=e.level;return e.statuses.map((function(e,a){var n;return Object(c.jsxs)("li",{className:"list-group-item",children:[0!==t?S(e)?Object(c.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):t>=a+1?Object(c.jsx)("i",{className:"bi bi-check-circle mr-1"}):Object(c.jsx)("i",{className:"bi bi-circle mr-1"}):Object(c.jsx)("i",{className:"bi bi-x-circle-fill mr-1"}),e," ",S(e)?"- ".concat(g()(null===(n=S(e))||void 0===n?void 0:n.date).format("MMMM DD, YYYY hh:mm A")):"",s.tasks?Object(c.jsx)("ul",{className:"list-group mt-2",children:s.tasks.filter((function(t){return t.for===e})).map((function(e,t){return Object(c.jsxs)("li",{className:"list-group-item",children:[e.done?Object(c.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):Object(c.jsx)("i",{className:"bi bi-circle mr-1"}),e.title]},t)}))}):null]},a)}))}(function(e){var t=function(e){switch(e){case"Received":return 1;case"Payment":return 2;case"Evaluating":return 3;case"Evaluated":case"Signed":case"Releasing":return 4;case"Released":return 5;default:return 0}}(e);return{statuses:re.filter((function(e){return!["Released","Evaluated"].includes(e)})),level:t}}(s.status))}),Object(c.jsxs)("div",{className:"card w-100 mx-1 my-4 shadow rounded",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsx)("h4",{className:"card-title",children:"History"})}),Object(c.jsx)("div",{className:"card-body table-responsive",style:{overflowY:"hidden"},children:Object(c.jsxs)("table",{className:"table table-sm text-center",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"User"}),Object(c.jsx)("th",{children:"Action"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsxs)("tbody",{children:[0===s.logs.length?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{}),Object(c.jsx)("td",{children:"No Data"}),Object(c.jsx)("td",{})]}):null,s.logs.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.user.name}),Object(c.jsx)("td",{children:e.action}),Object(c.jsx)("td",{children:g()(e.updated_at).format("MMMM DD, YYYY hh:mm A")})]},t)}))]})]})})]}),null!==s.evaluation?null:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("hr",{className:"my-2"}),Object(c.jsx)("h6",{children:"Leave a Feedback"}),Object(c.jsx)("textarea",{cols:30,rows:4,className:"form-control",onChange:function(e){p(e.target.value)},value:m}),Object(c.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),C()},children:"Send"})]})]}),s.approved?s.expired?Object(c.jsx)("div",{className:"card-footer pb-5",children:Object(c.jsx)("span",{className:"btn btn-danger btn-sm font-weight-bold",children:"This request has expired. Please request this document again."})}):Object(c.jsx)("div",{className:"card-footer",children:s.file?Object(c.jsx)("a",{href:"".concat(s.file.url,"&download=true"),className:"btn btn-success btn-sm",target:"_blank",rel:"noreferrer",children:"Download Document"}):Object(c.jsx)("span",{children:"The request is approved but there is no attached document yet."})}):null]}):Object(c.jsx)("div",{className:"d-flex h-100 w-100",children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(c.jsx)("div",{className:"modal fade",id:"deleteRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteRequestModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",id:"deleteRequestModalLabel",children:"Delete Request"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:"Are you sure you want to delete this request?"}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),$("#deleteRequestModal").modal("hide"),N()},children:"Confirm"}),Object(c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(c.jsx)("iframe",{title:"Print Page",id:"iframe",className:"d-none"})]})}function Ve(){var e=Object(j.g)(),t=function(t){return"".concat(e.path).concat(t)};return Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:t("/"),exact:!0,component:Be}),Object(c.jsx)(j.a,{path:t("/add"),component:Je}),Object(c.jsx)(j.a,{path:t("/:id"),component:Le})]})}function $e(){var e,t=Object(j.g)();return Object(c.jsx)(j.c,{children:Object(c.jsx)(j.a,{path:(e=U.ROOT,"".concat(t.path).concat(e)),component:Ve})})}function He(){var e,t=Object(j.g)(),a=[{url:P,icon:"nc-icon nc-bank",title:"Dashboard"},{url:(e=U.ROOT,"".concat(t.path).concat(e)),icon:"nc-icon nc-tag-content",title:"Requests"}];return Object(c.jsx)("div",{className:"sidebar-wrapper",style:{overflowX:"hidden"},children:Object(c.jsx)("ul",{className:"nav",children:a.map((function(e,t){return Object(c.jsx)("li",{className:y(e.url===window.location.pathname,"active"),children:Object(c.jsxs)(u.b,{to:e.url,children:[Object(c.jsx)("i",{className:e.icon}),Object(c.jsx)("p",{children:e.title})]})},t)}))})})}function ze(){var e=Object(j.f)(),t=Object(j.g)();if(!Q.has("logged")&&!Q.get("logged")||void 0===Q.get("user"))return e.push(E),null;var a,n=Q.get("user");return Object(c.jsxs)("div",{className:"wrapper bg-yellow",children:[Object(c.jsxs)("div",{className:"sidebar bg-maroon","data-color":"white","data-active-color":"danger",children:[Object(c.jsxs)("div",{className:"logo bg-maroon",children:[Object(c.jsx)(u.b,{to:P,className:"simple-text logo-mini",children:Object(c.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"rounded-circle"})}),Object(c.jsx)(u.b,{to:P,className:"logo-normal text-warning bg-maroon",children:Object(c.jsx)("h5",{children:"PUPBBDMS"})})]}),"Admin"===n.role?Object(c.jsx)(Pe,{}):null,q(n.role,["Processing","Cashier","Evaluation","Signing","Releasing","Director","Registrar"])?Object(c.jsx)(Te,{}):null,"Applicant"===n.role?Object(c.jsx)(He,{}):null]}),Object(c.jsxs)("div",{className:"main-panel h-100 bg-yellow",children:[Object(c.jsx)(Ye,{}),Object(c.jsxs)("div",{className:"content bg-yellow",children:[Object(c.jsx)(j.a,{path:(a=I,"".concat(t.path).concat(a)),exact:!0,component:Ue}),"Admin"===n.role?Object(c.jsx)(Me,{}):null,q(n.role,["Processing","Cashier","Evaluation","Signing","Releasing","Director","Registrar"])?Object(c.jsx)(Fe,{}):null,"Applicant"===n.role?Object(c.jsx)($e,{}):null]}),Object(c.jsx)(Ie,{})]})]})}function Qe(e){var t=function(t,a){var c=e.cms.find((function(e){return e.key===t}));return c?c.value:a};return Object(c.jsx)("div",{className:"section section-dark text-center",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h2",{className:"title",children:t("about-us-title","Let's talk about us")}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-profile card-plain",children:[Object(c.jsx)("div",{className:"card-avatar",children:Object(c.jsx)("a",{href:"#avatar",children:Object(c.jsx)("img",{src:t("about-us-profile-1-picture","/assets/img/prof.png"),alt:"..."})})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("a",{href:"#paper-kit",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("h4",{className:"card-title",children:t("about-us-profile-1-name","Staff")}),Object(c.jsx)("h6",{className:"card-category",children:t("about-us-profile-1-position","Staff Position")})]})}),Object(c.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-1-description","Description")})]})]})}),Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-profile card-plain",children:[Object(c.jsx)("div",{className:"card-avatar",children:Object(c.jsx)("a",{href:"#avatar",children:Object(c.jsx)("img",{src:t("about-us-profile-2-picture","/assets/img/prof.png"),alt:"..."})})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("a",{href:"#paper-kit",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("h4",{className:"card-title",children:t("about-us-profile-2-name","Staff")}),Object(c.jsx)("h6",{className:"card-category",children:t("about-us-profile-2-position","Staff Position")})]})}),Object(c.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-2-description","Description")})]})]})}),Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-profile card-plain",children:[Object(c.jsx)("div",{className:"card-avatar",children:Object(c.jsx)("a",{href:"#avatar",children:Object(c.jsx)("img",{src:t("about-us-profile-3-picture","/assets/img/prof.png"),alt:"..."})})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("a",{href:"#paper-kit",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("h4",{className:"card-title",children:t("about-us-profile-3-name","Staff")}),Object(c.jsx)("h6",{className:"card-category",children:t("about-us-profile-3-position","Staff Position")})]})}),Object(c.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-3-description","Descrption")})]})]})}),Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-profile card-plain",children:[Object(c.jsx)("div",{className:"card-avatar",children:Object(c.jsx)("a",{href:"#avatar",children:Object(c.jsx)("img",{src:t("about-us-profile-4-picture","/assets/img/prof.png"),alt:"..."})})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("a",{href:"#paper-kit",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("h4",{className:"card-title",children:t("about-us-profile-4-name","Staff")}),Object(c.jsx)("h6",{className:"card-category",children:t("about-us-profile-4-position","Staff Position")})]})}),Object(c.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-4-description","Description")})]})]})}),Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-profile card-plain",children:[Object(c.jsx)("div",{className:"card-avatar",children:Object(c.jsx)("a",{href:"#avatar",children:Object(c.jsx)("img",{src:t("about-us-profile-5-picture","/assets/img/prof.png"),alt:"..."})})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("a",{href:"#paper-kit",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("h4",{className:"card-title",children:t("about-us-profile-5-name","Staff")}),Object(c.jsx)("h6",{className:"card-category",children:t("about-us-profile-5-position","Staff Position")})]})}),Object(c.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-5-description","Description")})]})]})}),Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"card card-profile card-plain",children:[Object(c.jsx)("div",{className:"card-avatar",children:Object(c.jsx)("a",{href:"#avatar",children:Object(c.jsx)("img",{src:t("about-us-profile-6-picture","/assets/img/prof.png"),alt:"..."})})}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("a",{href:"#paper-kit",children:Object(c.jsxs)("div",{className:"author",children:[Object(c.jsx)("h4",{className:"card-title",children:t("about-us-profile-6-name","Staff")}),Object(c.jsx)("h6",{className:"card-category",children:t("about-us-profile-6-position","Staff Position")})]})}),Object(c.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-6-description","Description")})]})]})})]})]})})}g.a.extend(w.a),g.a.extend(w.a),g.a.extend(w.a),g.a.extend(w.a);var Ge=function(e){var t=Math.random().toString(36).substring(2,15);return Object(c.jsx)("div",{className:"container mb-4",children:Object(c.jsxs)("div",{id:t,className:"carousel slide","data-ride":"carousel",children:[Object(c.jsxs)("div",{className:"carousel-inner",children:[Object(c.jsx)("div",{className:"carousel-item active",children:Object(c.jsx)("img",{className:"d-block w-100",src:"/assets/img/login1.png",alt:"First slide"})}),Object(c.jsx)("div",{className:"carousel-item",children:Object(c.jsx)("img",{className:"d-block w-100",src:"/assets/img/login2.png",alt:"Second slide"})}),Object(c.jsx)("div",{className:"carousel-item",children:Object(c.jsx)("img",{className:"d-block w-100",src:"/assets/img/login3.png",alt:"Third slide"})}),Object(c.jsx)("div",{className:"carousel-item",children:Object(c.jsx)("img",{className:"d-block w-100",src:"/assets/img/login4.png",alt:"Fourth slide"})}),Object(c.jsx)("div",{className:"carousel-item",children:Object(c.jsx)("img",{className:"d-block w-100",src:"/assets/img/login5.png",alt:"Fifth slide"})})]}),Object(c.jsxs)("a",{className:"carousel-control-prev",href:"#".concat(t),role:"button","data-slide":"prev",children:[Object(c.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(c.jsx)("span",{className:"sr-only",children:"Previous"})]}),Object(c.jsxs)("a",{className:"carousel-control-next",href:"#".concat(t),role:"button","data-slide":"next",children:[Object(c.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(c.jsx)("span",{className:"sr-only",children:"Next"})]})]})})};function We(){var e=Object(n.useState)({name:"",email:"",message:""}),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],u=i[1],j=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,te.a.post("/contacts",a);case 4:s({name:"",email:"",message:""}),f.a.info("Message has been sent.","Notice"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.toJSON()),f.a.error("Unable to send message","Oops!");case 12:return e.prev=12,u(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"section landing-section",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-8 ml-auto mr-auto",children:[Object(c.jsx)("h2",{className:"text-center",children:"Keep in touch?"}),Object(c.jsxs)("form",{className:"contact-form",onSubmit:function(e){e.preventDefault(),j()},children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("label",{children:"Name"}),Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:Object(c.jsx)("i",{className:"nc-icon nc-single-02"})})}),Object(c.jsx)("input",{type:"text",className:"form-control ".concat(y(l,"disabled")),disabled:l,onChange:function(e){s(Object(h.a)(Object(h.a)({},a),{},{name:e.target.value}))},placeholder:"Name"})]})]}),Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("span",{className:"input-group-text",children:Object(c.jsx)("i",{className:"nc-icon nc-email-85"})})}),Object(c.jsx)("input",{type:"email",className:"form-control ".concat(y(l,"disabled")),disabled:l,onChange:function(e){s(Object(h.a)(Object(h.a)({},a),{},{email:e.target.value}))},placeholder:"Email"})]})]})]}),Object(c.jsx)("label",{children:"Message"}),Object(c.jsx)("textarea",{className:"form-control ".concat(y(l,"disabled")),disabled:l,onChange:function(e){s(Object(h.a)(Object(h.a)({},a),{},{message:e.target.value}))},rows:4,placeholder:"Tell us your thoughts and feelings..."}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-4 ml-auto mr-auto text-center",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-danger btn-lg btn-fill ".concat(y(l,"disabled")),disabled:l,children:l?"Sending":"Send Message"})})})]})]})}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 pt-5 text-center",children:[Object(c.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("i",{className:"fab fa-facebook fa-2x mx-2"})}),Object(c.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("i",{className:"fab fa-twitter fa-2x mx-2"})}),Object(c.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("i",{className:"fab fa-youtube fa-2x mx-2"})}),Object(c.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:Object(c.jsx)("i",{className:"fab fa-linkedin fa-2x mx-2"})})]}),Object(c.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 pt-5",children:[Object(c.jsx)("h6",{children:"Contact Us"}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)("b",{children:"PHONE"})}),Object(c.jsx)("div",{className:"col-9",children:"091234567890"}),Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)("b",{children:"EMAIL"})}),Object(c.jsx)("div",{className:"col-9",children:"email@pup.com"})]})]})]})]})})}function Xe(e){var t=function(t,a){var c=e.cms.find((function(e){return e.key===t}));return c?c.value:a};return Object(c.jsx)("div",{className:"section text-center",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-8 ml-auto mr-auto",children:[Object(c.jsx)("h2",{className:"title",children:t("description-title","")}),Object(c.jsx)("h5",{className:"description text-dark",children:t("description-paragraph","")})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"row text-dark",children:[Object(c.jsx)("div",{className:"col-md-3",children:Object(c.jsxs)("div",{className:"info",children:[Object(c.jsx)("div",{className:"icon icon-danger",children:Object(c.jsx)("i",{className:""})}),Object(c.jsxs)("div",{className:"description",children:[Object(c.jsx)("h4",{className:"info-title",children:t("description-card-1-title","Beautiful Gallery")}),Object(c.jsx)("p",{className:"description",children:t("description-card-1-description","Spend your time generating new ideas. You don't have to think of implementing.")})]})]})}),Object(c.jsx)("div",{className:"col-md-3",children:Object(c.jsxs)("div",{className:"info",children:[Object(c.jsx)("div",{className:"icon icon-danger",children:Object(c.jsx)("i",{className:""})}),Object(c.jsxs)("div",{className:"description",children:[Object(c.jsx)("h4",{className:"info-title",children:t("description-card-2-title","New Ideas")}),Object(c.jsx)("p",{children:t("decsription-card-2-description","Larger, yet dramatically thinner. More powerful, but remarkably power efficient.")})]})]})}),Object(c.jsx)("div",{className:"col-md-3",children:Object(c.jsxs)("div",{className:"info",children:[Object(c.jsx)("div",{className:"icon icon-danger",children:Object(c.jsx)("i",{className:""})}),Object(c.jsxs)("div",{className:"description",children:[Object(c.jsx)("h4",{className:"info-title",children:t("description-card-3-title","Statistics")}),Object(c.jsx)("p",{children:t("description-card-3-description","Choose from a veriety of many colors resembling sugar paper pastels.")})]})]})}),Object(c.jsx)("div",{className:"col-md-3",children:Object(c.jsxs)("div",{className:"info",children:[Object(c.jsx)("div",{className:"icon icon-danger",children:Object(c.jsx)("i",{className:""})}),Object(c.jsxs)("div",{className:"description",children:[Object(c.jsx)("h4",{className:"info-title",children:t("description-card-4-title","Delightful design")}),Object(c.jsxs)("p",{children:[t("description-card-4-description","Find unique and handmade delightful designs related items directly from our sellers"),"."]})]})]})})]})]})})}var Ke=function(e){var t=e.answer,a=Object(n.useState)(!1),s=Object(G.a)(a,2),r=s[0],i=s[1];return Object(c.jsxs)("div",{className:"card-body",children:[r?Object(c.jsx)("p",{className:"card-text",children:t}):null,Object(c.jsx)("a",{href:"/",className:"text-info font-weight-bold",onClick:function(e){e.preventDefault(),i(!r)},children:r?"Hide":"Show"})]})};function Ze(e){var t=JSON.parse(function(t,a){var c=e.cms.find((function(e){return e.key===t}));return c?c.value:a}("faqs",JSON.stringify([]))),a=[[]];return t.forEach((function(e){var t=a[a.length-1];t.length<2?(t.push(e),a.splice(a.length-1,1,t)):a.push([e])})),Object(c.jsx)("div",{className:"section landing-section",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-8 mx-auto justify-content-center",children:[Object(c.jsx)("h2",{className:"col-md-8 ml-auto mr-auto text-center justify-content-center",children:Object(c.jsx)("b",{children:"FAQs"})}),a.map((function(e,t){return Object(c.jsx)("div",{className:"card-group",children:e.map((function(e,t){return Object(c.jsxs)("div",{className:"card m-1 border-0 shadow rounded",children:[Object(c.jsx)("div",{className:"card-header d-flex",children:Object(c.jsx)("p",{className:"card-title mb-0 align-self-center",style:{color:"#000"},children:e.question})}),Object(c.jsx)(Ke,{answer:e.answer})]},t)}))},t)}))]})})})})}function et(e){var t=Object(j.f)(),a="true"===new URLSearchParams(t.location.search).get("preview"),n=function(t,a){var c=e.cms.find((function(e){return e.key===t}));return c?c.value:a};return Object(c.jsxs)("div",{className:"page-header",style:{backgroundImage:"url(".concat(n("header-picture","/assets/img/pup.jpg"),")"),backgroundPosition:"50%",backgroundSize:"cover",minHeight:"100vh",maxHeight:"999px",overflow:"hidden",position:"relative",width:"100%",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(c.jsx)("div",{className:"filter"}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"text-center",style:{color:"#fff",zIndex:3,position:"relative"},children:[Object(c.jsx)("h1",{children:n("header-title","Welcome to PBBDTM")}),Object(c.jsx)("h3",{children:n("header-description","PUP Bansud Branch Documents Monitoring System")}),Object(c.jsx)("br",{}),a?Object(c.jsxs)("a",{href:M,className:"btn btn-outline-neutral btn-round",onClick:function(e){return e.preventDefault()},children:[Object(c.jsx)("i",{className:"fa fa-play"})," Get Started"]}):Object(c.jsxs)(u.b,{to:M,className:"btn btn-outline-neutral btn-round",children:[Object(c.jsx)("i",{className:"fa fa-play"})," Get Started"]})]})})]})}function tt(){var e=Object(j.f)(),t=new URLSearchParams(e.location.search),a=Object(n.useState)([]),s=Object(G.a)(a,2),r=s[0],i=s[1],l=function(){return Q.get("logged")&&Q.get("user")},b="true"===t.get("preview"),m=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/downloadables");case 3:t=e.sent,a=t.data,i(_(a,["file_id"])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.toJSON());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),h=[];return r.forEach((function(e){h.includes(e.category)||h.push(e.category)})),Object(n.useEffect)((function(){m()}),[]),Object(c.jsx)("nav",{className:"navbar navbar-expand-lg fixed-top navbar-transparent border-0","color-on-scroll":"300",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"navbar-translate",children:[Object(c.jsx)(u.b,{className:"navbar-brand",to:"/",title:"PBBDTM","data-placement":"bottom",children:"PBBDMS"}),Object(c.jsxs)("button",{className:"navbar-toggler navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navigation","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation",children:[Object(c.jsx)("span",{className:"navbar-toggler-bar bar1"}),Object(c.jsx)("span",{className:"navbar-toggler-bar bar2"}),Object(c.jsx)("span",{className:"navbar-toggler-bar bar3"})]})]}),b?Object(c.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(c.jsxs)("ul",{className:"navbar-nav",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)("a",{href:L,className:"nav-link",onClick:function(e){return e.preventDefault()},children:[Object(c.jsx)("i",{className:"nc-icon nc-bag-16 mr-1"}),"Track Request"]})}),l()?Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)("a",{href:P,className:"nav-link",onClick:function(e){return e.preventDefault()},children:[Object(c.jsx)("i",{className:"nc-icon nc-bank mr-1"}),"Dashboard"]})}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)("a",{href:E,className:"nav-link",onClick:function(e){return e.preventDefault()},children:[Object(c.jsx)("i",{className:"nc-icon nc-layout-11 mr-1"}),"Login"]})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)("a",{href:M,className:"nav-link",onClick:function(e){return e.preventDefault()},children:[Object(c.jsx)("i",{className:"nc-icon nc-book-bookmark mr-1"}),"Register"]})})]})]})}):Object(c.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(c.jsxs)("ul",{className:"navbar-nav",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(u.b,{to:L,className:"nav-link",children:[Object(c.jsx)("i",{className:"nc-icon nc-bag-16 mr-1"}),"Track Request"]})}),l()?Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(u.b,{to:P,className:"nav-link",children:[Object(c.jsx)("i",{className:"nc-icon nc-bank mr-1"}),"Dashboard"]})}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(u.b,{to:E,className:"nav-link",children:[Object(c.jsx)("i",{className:"nc-icon nc-layout-11 mr-1"}),"Login"]})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(u.b,{to:M,className:"nav-link",children:[Object(c.jsx)("i",{className:"nc-icon nc-book-bookmark mr-1"}),"Register"]})})]})]})})]})})}function at(){var e=Object(n.useState)(!1),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)([]),i=Object(G.a)(r,2),l=i[0],u=i[1],j=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/cms");case 3:t=e.sent,a=t.data,u(Object(b.a)(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.toJSON());case 11:return e.prev=11,s(!0),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j(),$("body").css("background-color","#fff");var e=$("#dashboard-styles").attr("href");return $("head").append('<link rel="stylesheet" href="https://demos.creative-tim.com/paper-kit-2/assets/css/paper-kit.min.css?v=2.2.0" id="landing-styles" />'),$("head").append('<script src="https://demos.creative-tim.com/paper-kit-2/assets/js/paper-kit.min.js?v=2.2.0" id="landing-script"><\/script>'),function(){$("body").css("background-color","#f4f3ef"),$("#landing-styles").remove(),$("#landing-script").remove(),$("head").append('<link rel="stylesheet" href="'.concat(e,'" />'))}}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"pb-5 ".concat(y(!a,"d-none")),children:[Object(c.jsx)(tt,{}),Object(c.jsx)(et,{cms:l}),Object(c.jsx)(Xe,{cms:l}),Object(c.jsx)(Ge,{}),Object(c.jsx)(Qe,{cms:l}),Object(c.jsx)(We,{}),Object(c.jsx)(Ze,{cms:l}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h3",{className:"text-center mb-4",children:"Current Statistics"}),Object(c.jsx)(Re,{})]})]}),a?null:Object(c.jsx)("div",{className:"h-100vh d-flex align-items-center justify-content-center",children:Object(c.jsx)("div",{className:"container-fluid text-center",children:Object(c.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid rounded-circle",style:{height:"200px",width:"200px"}})})})]})}var ct=a(25),nt=a.n(ct);function st(){var e=Object(n.useState)({email:"",password:""}),t=Object(G.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(G.a)(r,2),l=i[0],b=i[1],m=Object(j.f)();Q.has("logged")&&Q.get("logged")&&Q.get("user")&&m.push(P);var p=function(){var e=Object(d.a)(o.a.mark((function e(){var t,c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.password.length){e.next=2;break}return e.abrupt("return",f.a.error("Please provide a password."));case 2:return b(!0),e.prev=3,e.next=6,te.a.post("/auth/login",a);case 6:t=e.sent,c=t.data,n=c.user,s=c.token,Q.set("logged",!0),Q.set("user",n),Q.set("token",s),console.log(Q.getAll(),"all"),m.push(P),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),D(e.t0),console.log(e.t0);case 19:return e.prev=19,b(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[3,15,19,22]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"w-100 h-100vh d-flex bg-vgrad ".concat(nt.a.body),children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsxs)("div",{className:"card shadow ".concat(nt.a.card),children:[Object(c.jsxs)("div",{className:"card-header text-center",children:[Object(c.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid hw-max-75 rounded-circle clickable",onClick:function(e){e.preventDefault(),m.push(A)}}),Object(c.jsx)("h2",{className:"card-title",children:Object(c.jsx)(u.b,{to:A,style:{textDecoration:"none"},children:"PUP Bansud Branch"})}),Object(c.jsx)("p",{className:"card-text",children:"Documents Monitoring System"})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p()},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"email@dtms.com",className:"form-control form-control-sm ".concat(y(l,"disabled")),disabled:l,value:a.email,onChange:function(e){a.email=e.target.value,s(Object(h.a)({},a))}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(y(l,"disabled")),disabled:l,value:a.password,onChange:function(e){a.password=e.target.value,s(Object(h.a)({},a))}})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary ".concat(y(l,"disabled")),disabled:l,children:l?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Login"})}),Object(c.jsxs)("div",{className:"form-group",children:["Don't have an account?"," ",Object(c.jsx)(u.b,{to:M,className:"d-inline",children:"Register"})]})]})})]})})})}var rt=a(90),it=a.n(rt);function lt(){var e,t,a=Object(n.useState)({name:"",email:"",phone:"09",password:"",password_confirmation:"",type:"Client",student_id_number:""}),s=Object(G.a)(a,2),r=s[0],i=s[1],l=Object(n.useState)(!1),b=Object(G.a)(l,2),m=b[0],p=b[1],x=(e=i,t=function(e){return Object(h.a)({},e)},function(a){return e(t(a))}),O=Object(j.f)();Q.has("logged")&&Q.get("logged")&&O.push(P);var v=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.password.length){e.next=2;break}return e.abrupt("return",f.a.error("Please provide a password."));case 2:if(r.password===r.password_confirmation){e.next=4;break}return e.abrupt("return",f.a.error("Password and Confirm Password does not match.","Oops!"));case 4:if("Student"!==r.type){e.next=10;break}if(/\d{4}-\d{5}-[A-Z]{2}-\d{1}/g.test(r.student_id_number)){e.next=7;break}return e.abrupt("return",f.a.error("Student ID Number is not in correct format."));case 7:if(t=r.student_id_number.split("-")[0],!(Number(t)>=(new Date).getUTCFullYear())){e.next=10;break}return e.abrupt("return",f.a.error("Student ID Number is invalid."));case 10:return p(!0),e.prev=11,e.next=14,te.a.post("/auth/register",r);case 14:a=e.sent,c=a.data,n=c.user,s=c.token,Q.set("logged",!0),Q.set("user",n),Q.set("token",s),O.push(P),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),D(e.t0),console.log(e.t0);case 26:return e.prev=26,p(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[11,22,26,29]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"w-100 h-100vh d-flex ".concat(nt.a.body),children:Object(c.jsx)("div",{className:"align-self-center mx-auto",children:Object(c.jsxs)("div",{className:"card shadow ".concat(nt.a.card),children:[Object(c.jsxs)("div",{className:"card-header text-center",children:[Object(c.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid hw-max-75 rounded-circle clickable",onClick:function(e){e.preventDefault(),O.push(A)}}),Object(c.jsx)("h2",{className:"card-title",children:Object(c.jsx)(u.b,{to:A,style:{textDecoration:"none"},children:"PBBDTM"})}),Object(c.jsx)("p",{className:"card-text",children:"\ud83c\udf40 New here? Please fill in the required information."})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v()},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"John Smith",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.name,onChange:function(e){r.name=e.target.value,x(r)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"email@dtms.com",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.email,onChange:function(e){r.email=e.target.value,x(r)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(c.jsx)(it.a,{mask:"0\\9999999999",type:"text",name:"phone",id:"phone",placeholder:"639123456789",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.phone,onChange:function(e){r.phone=e.target.value,x(r)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.password,onChange:function(e){r.password=e.target.value,x(r)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password_confirmation",children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",name:"password_confirmation",id:"password_confirmation",placeholder:"Password",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.password_confirmation,onChange:function(e){r.password_confirmation=e.target.value,x(r)}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"Type",children:"Type"}),Object(c.jsxs)("select",{name:"type",id:"type",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.type,onChange:function(e){r.type=e.target.value,x(r)},children:[Object(c.jsx)("option",{value:"Client",children:"Client"}),Object(c.jsx)("option",{value:"Student",children:"Student"})]})]}),"Student"===r.type?Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"student_id_number",children:"Student ID Number:"}),Object(c.jsx)("input",{type:"text",name:"student_id_number",id:"student_id_number",placeholder:"Student ID Number",className:"form-control form-control-sm ".concat(y(m,"disabled")),disabled:m,value:r.student_id_number,onChange:function(e){r.student_id_number=e.target.value,x(r)}}),Object(c.jsx)("small",{className:"form-text text-muted",children:"Ex: 2020-00001-BS-0"})]}):null,Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary ".concat(y(m,"disabled")),disabled:m,children:m?Object(c.jsx)("div",{className:"spin",children:Object(c.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Register"})}),Object(c.jsxs)("div",{className:"form-group",children:["Already have an account?"," ",Object(c.jsx)(u.b,{to:E,className:"d-inline",children:"Login"})]})]})})]})})})}a(85);var ot=function(e){return Object(n.useEffect)((function(){$("body").css("background-color","#fff");var e=$("#dashboard-styles").attr("href");return $("#dashboard-styles").remove(),$("head").append('<link rel="stylesheet" href="https://demos.creative-tim.com/paper-kit-2/assets/css/paper-kit.min.css?v=2.2.0" id="landing-styles" />'),$("head").append('<script src="https://demos.creative-tim.com/paper-kit-2/assets/js/paper-kit.min.js?v=2.2.0" id="landing-script"><\/script>'),function(){$("body").css("background-color","#f4f3ef"),$("#landing-styles").remove(),$("#landing-script").remove(),$("head").append('<link rel="stylesheet" href="'.concat(e,'" />'))}}),[]),Object(c.jsxs)("div",{className:"pb-5",children:[Object(c.jsx)(tt,{}),Object(c.jsxs)("div",{className:"page-header",style:{backgroundImage:"url(/assets/img/pup.jpg)",backgroundPosition:"50%",backgroundSize:"cover",minHeight:"100vh",maxHeight:"999px",overflow:"hidden",position:"relative",width:"100%",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(c.jsx)("div",{className:"filter"}),Object(c.jsx)("div",{className:"container d-flex",children:Object(c.jsx)(ae,{className:"d-inline mx-auto"})})]})]})};function dt(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("/self");case 3:t=e.sent,a=t.data,Q.set("logged",!0),Q.set("user",a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.toJSON()),Q.remove("user").set("logged",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){e()}),[]),Object(c.jsx)(u.a,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:A,exact:!0,component:at}),Object(c.jsx)(j.a,{path:E,component:st}),Object(c.jsx)(j.a,{path:M,component:lt}),Object(c.jsx)(j.a,{path:P,component:ze}),Object(c.jsx)(j.a,{path:L,exact:!0,component:ot}),Object(c.jsx)(j.a,{path:"".concat(L,"/:id"),component:Le})]})})}var ut=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,230)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};a(228);Error.prototype.toJSON=function(){var e={},t=this;return Object.getOwnPropertyNames(t).forEach((function(a){e[a]=t[a]}),t),"stack"in e&&(e.stack=e.stack.split(/\r?\n/).map((function(e){return e.trim()})).filter((function(e,t){return 0!==t}))),e},String.prototype.parseNumbers=function(){var e=this.split(".");if(e.length>1){var t=(e[0].match(/\d/g)||[]).join(""),a=(e[1].match(/\d/g)||[]).join("");return Number("".concat(t,".").concat(a))||0}var c=this.match(/\d/g);return c&&Number(c.join(""))||0},te.a.defaults.baseURL="https://pupbb-dms.ml/api",te.a.defaults.headers.common.Accept="application/json",Q.has("token")&&(te.a.defaults.headers.common.Authorization="Bearer ".concat(Q.get("token"))),Q.listen("token",(function(e){te.a.defaults.headers.common.Authorization="Bearer ".concat(e)})),i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(dt,{})}),document.getElementById("root")),ut()},25:function(e,t,a){e.exports={card:"Login_card__2G1x8",body:"Login_body__1gsPU"}},96:function(e,t,a){},98:function(e,t,a){}},[[229,1,2]]]);
//# sourceMappingURL=main.bbc314e6.chunk.js.map